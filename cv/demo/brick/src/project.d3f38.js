window.__require=function e(t,i,o){function a(n,c){if(!i[n]){if(!t[n]){var l=n.split("/");if(l=l[l.length-1],!t[l]){var r="function"==typeof __require&&__require;if(!c&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+n+"'")}}var d=i[n]={exports:{}};t[n][0].call(d.exports,function(e){return a(t[n][1][e]||e)},d,d.exports,e,t,i,o)}return i[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<o.length;n++)a(o[n]);return a}({Audio:[function(e,t,i){"use strict";cc._RF.push(t,"62e48ScKUNKK5xU689Vc1T0","Audio");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=e("../Modules/utils"),{ccclass:n,property:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.clickAudio=null,this.shotAudio=null,this.eliminateAudio=null,this.iceAudio=null,this.successAudio=null,this.failAudio=null,this.reviveAudio=null,this.starAudio=null,this.boomAudio=null}playClick(){a.default.musicSystem.click&&this.clickAudio&&cc.audioEngine.play(this.clickAudio)}playShotAudio(){a.default.musicSystem.click&&this.shotAudio&&cc.audioEngine.play(this.shotAudio)}playEliminateAudio(){a.default.musicSystem.click&&this.eliminateAudio&&cc.audioEngine.play(this.eliminateAudio)}playBgm(){let e="bgm_"+a.default.userData.music,t=a.default.bgms[e];t?a.default.musicSystem.bg&&(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(t,!0)):(s.default.loading_box.active=!0,s.default.loading_text.string="\u97f3\u4e50\u4e0b\u8f7d\u4e2d0%",cc.loader.loadRes("bgm/"+e,cc.AudioClip,(e,t,i)=>{let o=e/t;s.default.loading_text.string="\u97f3\u4e50\u4e0b\u8f7d\u4e2d"+Math.floor(100*o)+"%"},(t,i)=>{s.default.loading_box.active=!1,a.default.bgms[e]=i,a.default.musicSystem.bg&&(cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(i,!0))}))}playSuccessAudio(){a.default.musicSystem.click&&this.successAudio&&cc.audioEngine.play(this.successAudio)}playFailAudio(){a.default.musicSystem.click&&this.failAudio&&cc.audioEngine.play(this.failAudio)}playIceAudio(){a.default.musicSystem.click&&this.iceAudio&&cc.audioEngine.play(this.iceAudio)}playReviveAudio(){a.default.musicSystem.click&&this.reviveAudio&&cc.audioEngine.play(this.reviveAudio)}playStarAudio(){a.default.musicSystem.click&&this.starAudio&&cc.audioEngine.play(this.starAudio)}playBoomAudio(){a.default.musicSystem.click&&this.boomAudio&&cc.audioEngine.play(this.boomAudio)}};o([c({type:cc.AudioClip,displayName:"\u70b9\u51fb\u97f3\u6548"})],l.prototype,"clickAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u5c04\u51fb\u97f3\u6548"})],l.prototype,"shotAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u6d88\u9664\u97f3\u6548"})],l.prototype,"eliminateAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u51fb\u788e\u51b0\u5757\u97f3\u6548"})],l.prototype,"iceAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u8fc7\u5173\u97f3\u6548"})],l.prototype,"successAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u5931\u8d25\u97f3\u6548"})],l.prototype,"failAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u590d\u6d3b\u97f3\u6548"})],l.prototype,"reviveAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u6536\u96c6\u661f\u661f\u97f3\u6548"})],l.prototype,"starAudio",void 0),o([c({type:cc.AudioClip,displayName:"\u70b8\u5f39\u97f3\u6548"})],l.prototype,"boomAudio",void 0),l=o([n()],l),i.default=l,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils"}],Global:[function(e,t,i){"use strict";cc._RF.push(t,"252e9VHMPdJg58Uy4yTpZyw","Global"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("./Game/gameinfo");const a=new class{constructor(){this.gameInfo=o.default.instance,this.bricks={},this.bgms={},this.musicSystem={bg:!0,click:!0},this.vibrate=!0,this.userData={frist:!0,heart:20,gem:200,shield:5,level:1,level_progress:0,level_star:[3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],unlock_mode:["normal"],best_score:{normal:0,ice:0,shot:0,dark:0,wave:0,crazy:0,reverse:0},theme:3,skin:[0,3],music:2,music_list:[0,1,2],signin:{date:"2019/3/30",day:0},gamebox:[0,0,0,0,0,0,0,0,0,0],invitation:[],heart_count:1800,same_day:"2019/4/45",shield_count:0},this.loadCount=0,this.config={},this.uploadInfo={__userInfo:{},__rankInfo:{},brick:null}}loadBrickSprite(){cc.loader.loadResDir("brick",cc.SpriteFrame,(e,t)=>{e&&this.loadCount<3&&(this.loadCount+=1,this.loadBrickSprite(),console.warn("\u7816\u5757\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\u91cd\u65b0\u52a0\u8f7d\u6b21\u6570",this.loadCount));for(let e=0;e<t.length;e++){const i=t[e];this.bricks[i._name]=i}console.log("\u52a0\u8f7d\u7816\u5757\u8d44\u6e90 >>",this.bricks)})}saveData(){window.localStorage.setItem("brick_v1",JSON.stringify(this.userData))}fetchData(){return window.localStorage.getItem("brick_v1")?JSON.parse(window.localStorage.getItem("brick_v1")):null}removeData(){}};i.default=a,cc._RF.pop()},{"./Game/gameinfo":"gameinfo"}],Load:[function(e,t,i){"use strict";cc._RF.push(t,"3b245//Hv5PJ6dGiRlVblVH","Load");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./Global"),s=e("./Modules/wechat"),{ccclass:n,property:c,menu:l}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.text=null,this.line=null}start(){const e=this.line.width,t="Game";this.line.width=0;let i=!1,o=!1,n=!1;function c(){n=!0,o&&(s.default.hideLoading(),cc.director.loadScene(t))}a.default.fetchData()?(i=!0,a.default.userData=a.default.fetchData(),console.log("\u4ece\u672c\u5730\u62ff\u53d6\u6570\u636e >>",a.default.userData)):a.default.removeData(),window.wx&&(s.default.initShare(),s.default.checkVersionUpdate(),s.default.setKeepLight(),s.default.initBanner(),s.default.checkVideo(),s.default.userLogin(()=>{s.default.getData(e=>{e.data.brick&&!i&&(a.default.userData=e.data.brick,console.log("\u672c\u5730\u6ca1\u6709\u6570\u636e\uff0c\u4ece\u670d\u52a1\u7aef\u83b7\u53d6 >>",e.data.brick)),e.data.__userInfo.nickname&&e.data.__userInfo.headimgurl&&(a.default.gameInfo.authorization=!0,a.default.uploadInfo.__userInfo=e.data.__userInfo),console.log("\u7528\u6237\u662f\u5426\u6388\u6743-authorization >>",a.default.gameInfo.authorization)},function(){console.log("\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25!!!!")},()=>{s.default.getSetting(e=>{a.default.config=e.data,console.log("\u6e38\u620f\u8bbe\u7f6e >>",a.default.config),window.setData=e.data,c()},e=>{c()})})},()=>{c()})),a.default.loadBrickSprite(),cc.director.preloadScene(t,(t,i,o)=>{let a=t/i;this.line.width=e*a,this.text.string=`\u52a0\u8f7d\u4e2d...\uff08${Math.floor(100*a)}%\uff09`,1==a&&(this.text.string="\u5b8c\u6210\uff08100%\uff09")},()=>(cc.log("\u9884\u52a0\u8f7d\u6e38\u620f\u573a\u666f\u6210\u529f"),o=!0,cc.director.loadScene(t)))}};o([c({type:cc.Label,displayName:"\u52a0\u8f7d\u6587\u5b57"})],r.prototype,"text",void 0),o([c({type:cc.Node,displayName:"\u52a0\u8f7d\u8fdb\u5ea6\u6761"})],r.prototype,"line",void 0),r=o([n(),l("\u6e38\u620f\u811a\u672c/\u52a0\u8f7d\u9875")],r),i.default=r,cc._RF.pop()},{"./Global":"Global","./Modules/wechat":"wechat"}],Main:[function(e,t,i){"use strict";cc._RF.push(t,"feb3ftnu8dML71M6OePphIq","Main");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./Menu"),s=e("../Global"),n=e("../Modules/utils"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends a.default{constructor(){super(...arguments),this.brickPrefab=null,this.blastPrefab=null,this.starPrefab=null,this.wrapNode=null,this.spotPrefab=null,this.gem_icon=null,this.heartTip=null,this.brickPool=[],this.blastPool=[],this.starPool=[],this.gemPool=[],this.count=0,this.heart_tip=null}createBrickPool(){for(let e=0;e<100;e++){const e=cc.instantiate(this.brickPrefab);this.brickPool.push(e)}}createBlastPool(){for(let e=0;e<10;e++){const e=cc.instantiate(this.blastPrefab);this.blastPool.push(e)}}createStarPool(){for(let e=0;e<3;e++){const e=cc.instantiate(this.starPrefab);this.starPool.push(e)}}getBrick(e,t=!1,i=!0){let o=null;return(o=this.brickPool.length>0?this.brickPool.shift():cc.instantiate(this.brickPrefab)).active=i,o.data_index=null,o.data_layer=null,o.data_shot=!1,o.data_correct=!1,o.data_type=e,o.data_progress=t,cc.find("motion_streak",o).active=!1,o}outPutBlast(e,t,i="blast"){let o=null;o=this.blastPool.length>0?this.blastPool.shift():cc.instantiate(this.blastPrefab);let a=e+s.default.gameInfo.brick_width/2,n=t+s.default.MapGM.node.y-s.default.gameInfo.brick_height/2;o.data_type=i,o.setPosition(a,n),o.setParent(this.wrapNode)}outPutstar(e,t){let i=null;i=this.starPool.length>0?this.starPool.shift():cc.instantiate(this.starPrefab);let o=e+s.default.gameInfo.brick_width/2,a=t+s.default.MapGM.node.y-s.default.gameInfo.brick_height;i.setPosition(o,a),i.setParent(this.wrapNode)}putBrick(e){e.removeFromParent(!0),this.brickPool.push(e)}putBlast(e){e.removeFromParent(!0),this.blastPool.push(e)}putStar(e){e.removeFromParent(!0),this.starPool.push(e)}createGemNode(){let e=new cc.Node("gem");return e.addComponent(cc.Sprite).spriteFrame=this.gem_icon,e}getGemNode(){let e=null;return e=this.gemPool.length>0?this.gemPool.shift():this.createGemNode()}putGemNode(e){e.removeFromParent(!1),this.gemPool.push(e)}outputSpot(){for(let e=0;e<6;e++){const t=cc.instantiate(this.spotPrefab);setTimeout(()=>{t.parent=this.node},.2*e)}}checkMaxPhone(){this.node.width/this.node.height<.5?(s.default.gameInfo.isMaxPhone=!0,s.default.gameInfo.bottom=380):s.default.gameInfo.bottom=280}init(){this.topNode=cc.find("Canvas/top"),this.topNode.zIndex=3,this.heartLabel=cc.find("heart_value",this.topNode).getComponent(cc.Label),this.gemLabel=cc.find("gem_value",this.topNode).getComponent(cc.Label),this.shieldLabel=cc.find("shield_value",this.topNode).getComponent(cc.Label),this.heart_tip=cc.find("tip",this.topNode).getComponent(cc.Label),this.wrapNode.active=!1,this.checkMaxPhone(),this.createBrickPool(),this.createBlastPool(),this.createStarPool(),this.outputSpot(),s.default.loadBrickSprite(),n.default.setLoadingBox(cc.instantiate(this.loadBox),this.node),this.heart=s.default.userData.heart,this.gem=s.default.userData.gem,this.shield=s.default.userData.shield}startGame(){this.topNode.active=!1,this.wrapNode.active=!0,0==s.default.gameInfo.level&&"level"==s.default.gameInfo.type?this.openNoviceBox():s.default.gameInfo.state="start"}loopNext(){this.showToast("\u6e38\u620f\u7ed3\u675f"),this.scheduleOnce(()=>{let e=Math.floor(s.default.gameInfo.socre/10);e>0&&this.gemMove(()=>{this.gem+=e,this.showToast("\u672c\u5c40\u83b7\u5f97"+e+"\u94bb\u77f3",1.5)}),s.default.MapGM.recoveryBrick(),this.topNode.active=!0,this.pageSwitch("home"),this.wrapNode.active=!1},1);let e=s.default.gameInfo.mode,t=s.default.gameInfo.socre;t>s.default.userData.best_score[e]&&(s.default.userData.best_score[e]=t,this.saveData())}gameOver(){this.vibrateLong(),this.playFailAudio(),s.default.WrapGM.stopNodeMove(),"loop"==s.default.gameInfo.type?s.default.gameInfo.socre<10||"revive"==s.default.gameInfo.state||0==s.default.userData.shield&&s.default.userData.shield_count<=0?(s.default.gameInfo.state="over",this.loopNext()):(s.default.gameInfo.state="over",this.openRevive()):"level"==s.default.gameInfo.type&&("revive"==s.default.gameInfo.state||s.default.userData.shield_count<=0&&0==s.default.userData.shield?(s.default.gameInfo.state="over",this.openResult("fail")):(s.default.gameInfo.state="over",this.openRevive()))}dataGM(){s.default.userData.hasOwnProperty("heart_count")||(s.default.userData.heart_count=1800),s.default.userData.hasOwnProperty("same_day")||(s.default.userData.same_day="2019/4/45"),s.default.userData.hasOwnProperty("shield_count")||(s.default.userData.shield_count=15),s.default.userData.hasOwnProperty("frist")||(s.default.userData.frist=!1);let e=n.default.timeFormat().split(" ")[0];s.default.userData.same_day!=e&&(s.default.userData.shield_count=15,s.default.userData.same_day=e,s.default.userData.shield+=3,s.default.userData.shield_count-=3)}closeNovice(){s.default.NoviceGM&&(s.default.NoviceGM.node.active=!1)}gemMove(e){const t=this;let i=cc.find("frame_green",this.topNode),o=this.topNode.y;function a(e=1,a){let s=t.getGemNode();s.parent=t.node,s.stopAllActions(),s.x=0,s.y=0;let n=[cc.v2(s.x,s.y),cc.v2(s.x+260*e,o-100),cc.v2(i.x,o)];s.runAction(cc.sequence(cc.bezierTo(.5,n),cc.callFunc(()=>{t.putGemNode(s),a&&a()})))}let s=[1,-1,1,-1];for(let t=0;t<s.length;t++){const i=s[t];this.scheduleOnce(function(){a(i,()=>{e&&t==s.length-1&&e()})},.1*t)}}vibrateShort(){s.default.vibrate&&n.default.vibrateShort()}vibrateLong(){s.default.vibrate&&n.default.vibrateLong()}showHeartTip(){this.heartTip.active=!0,this.heartTip.zIndex=99,this.heartTip.stopAllActions(),this.heartTip.setPosition(0,0),this.heartTip.opacity=255;let e=cc.find("heart",this.heartTip);e.stopAllActions(),e.setScale(.3),e.opacity=0;let t=cc.find("heart_num",this.heartTip);t.stopAllActions(),t.setPosition(0,4),t.opacity=0;let i=cc.spawn(cc.scaleTo(.2,1,1),cc.fadeIn(.2));i.easing(cc.easeInOut(3)),e.runAction(cc.sequence(i,cc.callFunc(()=>{let e=cc.spawn(cc.moveTo(.5,124,4),cc.fadeIn(.5));e.easing(cc.easeInOut(3)),t.runAction(cc.sequence(e,cc.callFunc(()=>{this.heartTip.runAction(cc.sequence(cc.spawn(cc.moveBy(.1,0,-200),cc.fadeOut(.1)),cc.callFunc(()=>{this.heartTip.active=!1})))})))})))}onLoad(){s.default.Game=this,this.dataGM(),this.init()}start(){this.playBgm()}update(e){if(this.count+=1,60==this.count&&(this.count=0,this.heart<s.default.gameInfo.max_haert)){s.default.userData.heart_count-=1;let e=n.default.secondFormat(s.default.userData.heart_count);this.heart_tip.string=`${e.hour}:${e.minute}:${e.second}`,0==s.default.userData.heart_count&&(s.default.userData.heart_count=1800,this.heart+=10,this.showToast("\u5728\u7ebf30\u5206\u949f\uff0c\u589e\u52a0\u7231\u5fc310\u4e2a~"),s.default.saveData())}}};o([l({type:cc.Prefab,displayName:"\u7816\u5757\u9884\u5236\u4f53"})],d.prototype,"brickPrefab",void 0),o([l({type:cc.Prefab,displayName:"\u7c92\u5b50\u9884\u5236\u4f53"})],d.prototype,"blastPrefab",void 0),o([l({type:cc.Prefab,displayName:"\u661f\u661f\u9884\u5236\u4f53"})],d.prototype,"starPrefab",void 0),o([l({type:cc.Node,displayName:"\u6e38\u620f\u754c\u9762"})],d.prototype,"wrapNode",void 0),o([l({type:cc.Prefab,displayName:"\u5149\u5708\u79fb\u52a8"})],d.prototype,"spotPrefab",void 0),o([l({type:cc.SpriteFrame,displayName:"\u94bb\u77f3\u56fe\u7247"})],d.prototype,"gem_icon",void 0),o([l({type:cc.Node,displayName:"\u7231\u5fc3\u6d88\u8017"})],d.prototype,"heartTip",void 0),d=o([c,r("\u6e38\u620f\u811a\u672c/\u6e38\u620f\u4e3b\u7a0b\u5e8f")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","./Menu":"Menu"}],Menu:[function(e,t,i){"use strict";cc._RF.push(t,"327803wjghLo5/zmOHpHXmC","Menu");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./Audio"),s=e("../Global"),n=e("../Modules/utils"),c=e("../Modules/wechat"),{ccclass:l,property:r}=cc._decorator;let d=class extends a.default{constructor(){super(...arguments),this.homePage=null,this.loadBox=null,this.item_on=null,this.item_off=null,this.head_default=null,this.topNode=null,this.heartLabel=null,this.gemLabel=null,this.shieldLabel=null,this.colorIndex=0,this.toastNode=null,this.toastText=null,this.modeswitchBox=null,this.rankBox=null,this.shopBox=null,this.invitationBox=null,this.reviveBox=null,this.resultBox=null,this.pauseBox=null,this.hpBox=null,this.shieldBox=null,this.noviceBox=null,this.edgeBox=null}set heart(e){s.default.userData.heart=e,this.heartLabel.string=e.toString(),this.saveData()}get heart(){return s.default.userData.heart}set gem(e){s.default.userData.gem=e,this.gemLabel.string=e.toString(),this.saveData()}get gem(){return s.default.userData.gem}set shield(e){s.default.userData.shield=e,this.shieldLabel.string=e.toString(),this.saveData()}get shield(){return s.default.userData.shield}saveData(){if(s.default.saveData(),window.wx){let e=s.default.userData.level;s.default.uploadInfo.brick=s.default.userData,s.default.uploadInfo.__rankInfo.key_1=e,wx.postMessage({action:"uploadScore",score:e}),c.default.saveData(s.default.uploadInfo)}}showToast(e,t=1){let i=cc.spawn(cc.fadeIn(.15),cc.scaleTo(.15,1.1,1.1));i.easing(cc.easeElasticInOut(3));let o=cc.sequence(i,cc.scaleTo(.1,1,1),cc.scaleTo(t,1,1),cc.spawn(cc.fadeOut(.1),cc.scaleTo(.1,.5)));this.toastNode?(this.toastNode.stopAllActions(),this.toastText.string=e,this.toastNode.runAction(o)):cc.loader.loadRes("prefab/toast",cc.Prefab,(t,i)=>{this.toastNode=cc.instantiate(i),this.toastNode.zIndex=99,this.toastNode.setScale(.5),this.toastNode.opacity=0,this.toastNode.setParent(this.node),this.toastText=cc.find("text",this.toastNode).getComponent(cc.Label),this.toastText.string=e,this.toastNode.runAction(o)})}pageSwitch(e,t){let i=this.homePage.children;for(let o=0;o<i.length;o++){const a=i[o];if(a.stopAllActions(),"game_background"==a.name)switch(e){case"home":a.runAction(cc.fadeOut(.8)),cc.find("level-box",this.homePage).getComponent("level").updateLevel();break;case"game":a.runAction(cc.sequence(cc.fadeIn(.8),cc.callFunc(function(){t&&t()}))),this.backgroundColorSwitch(!0)}else switch(e){case"home":let t=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1));t.easing(cc.easeInOut(3)),a.runAction(t);break;case"none":case"game":let i=cc.spawn(cc.fadeOut(.3),cc.scaleTo(.3,.3));i.easing(cc.easeInOut(3)),a.runAction(i)}}}backgroundColorSwitch(e=!1){let t=s.default.gameInfo.color_list,i=t.length,o=cc.find("game_background",this.homePage),a=o.children;if(e){this.colorIndex=0;let e=t[this.colorIndex];return void a.forEach(t=>{t.name==e?(t.opacity=255,t.zIndex=i):(t.opacity=0,t.zIndex=0)})}let n=this.colorIndex;this.colorIndex+=1,this.colorIndex>=i&&(this.colorIndex=0);let c=this.colorIndex;for(let e=0;e<t.length;e++){const a=t[e],l=cc.find(a,o);e!=n&&e!=c&&(l.opacity=0,l.zIndex=0),e==n&&(l.opacity=255,l.zIndex=i-1),e==c&&(l.opacity=0,l.zIndex=i,l.runAction(cc.fadeIn(s.default.gameInfo.transition)))}}openModeSwitch(e=null){this.pageSwitch("game"),this.modeswitchBox?(this.modeswitchBox.data_index=e,this.modeswitchBox.active=!0):n.default.loadPrefab("modeswitch-box",t=>{this.modeswitchBox=cc.instantiate(t),this.modeswitchBox.data_index=e,this.modeswitchBox.setParent(this.node)})}openRank(){this.rankBox?this.rankBox.active=!0:n.default.loadPrefab("rank-box",e=>{this.rankBox=cc.instantiate(e),this.rankBox.zIndex=this.topNode.zIndex+2,this.rankBox.setParent(this.node)})}openShop(){this.shopBox?this.shopBox.active=!0:n.default.loadPrefab("shop-box",e=>{this.shopBox=cc.instantiate(e),this.shopBox.zIndex=10,this.shopBox.setParent(this.node)})}openInvitation(){this.invitationBox?this.invitationBox.active=!0:n.default.loadPrefab("invitation-box",e=>{this.invitationBox=cc.instantiate(e),this.invitationBox.zIndex=this.topNode.zIndex+1,this.invitationBox.setParent(this.node)})}openShare(){c.default.share()}openRevive(){this.reviveBox?this.reviveBox.active=!0:n.default.loadPrefab("revive-box",e=>{this.reviveBox=cc.instantiate(e),this.reviveBox.zIndex=this.topNode.zIndex+1,this.reviveBox.setParent(this.node)})}openResult(e){this.resultBox?(this.resultBox.data_type=e,this.resultBox.active=!0):n.default.loadPrefab("result-box",t=>{this.resultBox=cc.instantiate(t),this.resultBox.zIndex=this.topNode.zIndex+1,this.resultBox.data_type=e,this.resultBox.setParent(this.node)})}openPause(){s.default.gameInfo.isPause=!0,this.pauseBox?this.pauseBox.active=!0:n.default.loadPrefab("pause-box",e=>{this.pauseBox=cc.instantiate(e),this.pauseBox.zIndex=this.topNode.zIndex+1,this.pauseBox.setParent(this.node)})}openHpBox(){this.hpBox?this.hpBox.active=!0:n.default.loadPrefab("hp-box",e=>{this.hpBox=cc.instantiate(e),this.hpBox.zIndex=this.topNode.zIndex+1,this.hpBox.setParent(this.node)})}openShieldBox(){this.shieldBox?this.shieldBox.active=!0:n.default.loadPrefab("shield-box",e=>{this.shieldBox=cc.instantiate(e),this.shieldBox.zIndex=this.topNode.zIndex+1,this.shieldBox.setParent(this.node)})}openNoviceBox(){this.noviceBox?this.noviceBox.active=!0:n.default.loadPrefab("novice-box",e=>{this.noviceBox=cc.instantiate(e),this.noviceBox.zIndex=this.topNode.zIndex+1,this.noviceBox.setParent(this.node)})}openEdgeBox(){this.edgeBox?this.edgeBox.active=!0:n.default.loadPrefab("edge-box",e=>{this.edgeBox=cc.instantiate(e),this.edgeBox.zIndex=this.topNode.zIndex+1,this.edgeBox.setParent(this.node)})}};o([r({type:cc.Node,displayName:"\u4e3b\u754c\u9762"})],d.prototype,"homePage",void 0),o([r({type:cc.Prefab,displayName:"\u8d44\u6e90\u52a0\u8f7d\u6846"})],d.prototype,"loadBox",void 0),o([r({type:cc.SpriteFrame,displayName:"item\u9009\u4e2d\u56fe\u7247"})],d.prototype,"item_on",void 0),o([r({type:cc.SpriteFrame,displayName:"item\u9ed8\u8ba4\u56fe\u7247"})],d.prototype,"item_off",void 0),o([r({type:cc.SpriteFrame,displayName:"\u5934\u50cf\u9ed8\u8ba4\u56fe\u7247"})],d.prototype,"head_default",void 0),d=o([l()],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat","./Audio":"Audio"}],TheButton:[function(e,t,i){"use strict";cc._RF.push(t,"ed97dNRAJhKsKj4mTJlxQ2l","TheButton");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c,requireComponent:l}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.touchScale=.85,this.transDuration=.1,this.touchOpacity=255,this.isClick=!1,this.isGray=!1,this.initOpacity=null,this.initScale=null}clickMove(){this.node.stopAllActions();let e=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.1,.8,.8),cc.scaleTo(.1,1.2,1.2),cc.scaleTo(.1,1,1));this.node.runAction(e),a.default.Game.playClick()}onTouchDown(){this.isGray?this.node.color=cc.color(140,140,140):(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(this.transDuration,this.touchScale)),this.node.opacity=this.touchOpacity),a.default.Game.playClick()}onTouchUp(){this.isGray?this.node.color=cc.color(255,255,255):(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(this.transDuration,this.initScale)),this.node.opacity=this.initOpacity)}onLoad(){this.isClick||(this.initScale=this.node.scale,this.initOpacity=this.node.opacity,this.node.on("touchstart",this.onTouchDown,this),this.node.on("touchend",this.onTouchUp,this),this.node.on("touchcancel",this.onTouchUp,this))}};o([n({displayName:"\u6441\u4e0b\u53bb\u7f29\u653e\u503c"})],r.prototype,"touchScale",void 0),o([n({displayName:"\u52a8\u753b\u8fc7\u6e21\u65f6\u95f4"})],r.prototype,"transDuration",void 0),o([n({displayName:"\u6441\u4e0b\u53bb\u7684\u900f\u660e\u5ea6"})],r.prototype,"touchOpacity",void 0),o([n({displayName:"\u662f\u5426\u9700\u8981\u70b9\u51fb\u52a8\u753b"})],r.prototype,"isClick",void 0),o([n({displayName:"\u6309\u4e0b\u65f6\u6309\u94ae\u53d8\u7070"})],r.prototype,"isGray",void 0),r=o([s(),c("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/\u6309\u94ae"),l(cc.Button)],r),i.default=r,cc._RF.pop()},{"../Global":"Global"}],base:[function(e,t,i){"use strict";cc._RF.push(t,"e32a0m0iXxDrpVm2Cs80uO2","base");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:a,property:s}=cc._decorator;let n=class extends cc.Component{constructor(){super(...arguments),this.popBox=null,this.ringNode=null,this.moveTop=200}close(){this.node.active=!1}showMove(e=null,t){let i=e||this.popBox;i.stopAllActions(),i.setScale(.5),i.opacity=0;let o=cc.spawn(cc.fadeIn(.15),cc.scaleTo(.15,1.1,1.1));o.easing(cc.easeElasticInOut(3)),i.runAction(cc.sequence(o,cc.scaleTo(.1,1,1),cc.callFunc(()=>{t&&t()})))}slideShow(e,t=-this.moveTop,i){e.stopAllActions(),e.y=t,e.opacity=0;let o=cc.spawn(cc.moveTo(.5,0,0),cc.fadeIn(.5));o.easing(cc.easeElasticInOut(3)),e.runAction(cc.sequence(o,cc.callFunc(()=>{i&&i()})))}slideHide(e,t=-this.moveTop,i){e.stopAllActions(),e.y=0;let o=cc.spawn(cc.moveTo(.5,0,t),cc.fadeOut(.5));o.easing(cc.easeElasticInOut(3)),e.runAction(cc.sequence(o,cc.callFunc(()=>{i&&i(),this.close()})))}ringMove(e=null){(e||this.ringNode).runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(.5,1.4),cc.rotateBy(.5,36)),cc.spawn(cc.scaleTo(.5,.9),cc.rotateBy(.5,36)))))}};o([s({type:cc.Node,displayName:"\u4e2d\u95f4\u5f39\u51fa\u5c42"})],n.prototype,"popBox",void 0),o([s({type:cc.Node,displayName:"\u65cb\u8f6c\u5149\u73af"})],n.prototype,"ringNode",void 0),n=o([a()],n),i.default=n,cc._RF.pop()},{}],blast:[function(e,t,i){"use strict";cc._RF.push(t,"b7d53v1hwlO1ao2JY+lTFvU","blast");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.brick=null,this.ice=null}playParticle(){this.brick.node.active=this.ice.node.active=!1,"ice"==this.node.data_type?(this.ice.node.active=!0,this.ice.resetSystem()):(this.brick.node.active=!0,this.brick.resetSystem())}onEnable(){this.playParticle(),a.default.Game.scheduleOnce(()=>{a.default.Game.putBlast(this.node)},.5)}onLoad(){this.brick=cc.find("brick",this.node).getComponent(cc.ParticleSystem),this.ice=cc.find("ice",this.node).getComponent(cc.ParticleSystem)}};l=o([s(),c("\u6e38\u620f\u811a\u672c/\u7c92\u5b50\u7206\u70b8")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],brick:[function(e,t,i){"use strict";cc._RF.push(t,"76d1dRD1blM1axcEw7Vt2jR","brick");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.sprite1=null,this.sprite2=null,this.textLabel=null}testLog(){this.textLabel.string="Y:"+this.node.y;let e=null===this.node.data_layer?"???":this.node.data_layer;this.textLabel.string=e.toString(),this.textLabel.string=this.node.data_type}init(){this.sprite1=cc.find("sprite_1",this.node).getComponent(cc.Sprite),this.sprite2=cc.find("sprite_2",this.node).getComponent(cc.Sprite)}updateSprite(){let e=this.node.data_type,t="";if("normal"==e){t=`${e}_${a.default.gameInfo.color_list[a.default.Game.colorIndex]}_${a.default.userData.theme}`}else t=e+"_"+a.default.userData.theme;this.sprite2.node.opacity=0,this.sprite1.spriteFrame=a.default.bricks[t]}brickColorTransition(){let e=this.node.data_type;if("star"==e||"ice"==e||"boom"==e)return;let t=`${e}_${a.default.gameInfo.color_list[a.default.Game.colorIndex]}_${a.default.userData.theme}`;this.sprite2.spriteFrame=a.default.bricks[t],this.sprite2.node.runAction(cc.sequence(cc.fadeIn(a.default.gameInfo.transition),cc.callFunc(()=>{this.sprite1.spriteFrame=a.default.bricks[t],this.sprite2.node.opacity=0})))}checkToBottom(){this.node.y-a.default.gameInfo.brick_height+a.default.MapGM.node.y<=a.default.WrapGM.line.y+a.default.WrapGM.line.height/2&&a.default.Game.gameOver()}shotMove(){let e=a.default.gameInfo.shot_target.y;e+=a.default.MapGM.node.y,this.node.y+2*a.default.gameInfo.shot_speed>e&&!this.node.data_correct?(this.node.data_correct=!0,this.node.y=e-1):this.node.y+=a.default.gameInfo.shot_speed,this.node.y<e||(this.node.y=e,a.default.Game.putBrick(this.node),a.default.WrapGM.shotFinish())}onEnable(){this.updateSprite()}onLoad(){this.init()}lateUpdate(){let e=this.node.data_shot;"start"!=a.default.gameInfo.state&&"revive"!=a.default.gameInfo.state||a.default.gameInfo.isPause?e&&a.default.Game.putBrick(this.node):e?this.shotMove():this.checkToBottom()}};l=o([s(),c("\u6e38\u620f\u811a\u672c/\u7816\u5757")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],edge:[function(e,t,i){"use strict";cc._RF.push(t,"5fb3aOh2QFDKICcbeimsFyX","edge");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=e("../Modules/wechat"),n=e("../Modules/utils"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.music_on=null,this.music_off=null,this.vibrate_on=null,this.vibrate_off=null,this.content=null,this.moving=!0,this.name_frame=null,this.head_img=null,this.btnAuthorization=null,this.userBtn=null}openShare(){s.default.share()}openShop(){a.default.Game.openShop()}openRank(){a.default.Game.openRank()}openInvitation(){a.default.Game.openInvitation()}musicSwitch(e){let t=e.target.getComponent(cc.Sprite);a.default.musicSystem.click=!a.default.musicSystem.click,a.default.musicSystem.bg=!a.default.musicSystem.bg,a.default.musicSystem.click?(t.spriteFrame=this.music_on,a.default.Game.playBgm()):(t.spriteFrame=this.music_off,cc.audioEngine.stopMusic())}switchVibrate(e){let t=e.target.getComponent(cc.Sprite);a.default.vibrate=!a.default.vibrate,a.default.vibrate?t.spriteFrame=this.vibrate_on:t.spriteFrame=this.vibrate_off}init(){this.content=cc.find("content",this.node),this.content.height=a.default.Game.node.height,this.name_frame=cc.find("btn_name",this.content),this.head_img=cc.find("head_frame/mask/img",this.content).getComponent(cc.Sprite),this.btnAuthorization=cc.find("btn_authorization",this.content);let e=cc.find("edge_box/scrollview/view/content",this.content),t=cc.find("item",e),i=cc.instantiate(t);t.destroy();let o=s.default.config.box_info;for(let t=0;t<o.length;t++){const a=o[t],s=cc.instantiate(i);s.minigame=a,n.default.loadNetImg(cc.find("mask/img",s),a.images,"png"),cc.find("name",s).getComponent(cc.Label).string=a.name,s.parent=e,s.on("click",this.openMinGame,this)}if(window.wx&&!a.default.gameInfo.authorization)if(s.default.compareVersion("2.0.1")<0)this.btnAuthorization.on("click",this.authorizationClick,this);else{const e=wx.getSystemInfoSync().windowHeight,t=wx.getSystemInfoSync().windowWidth;let i=t/375;this.userBtn=wx.createUserInfoButton({type:"text",text:"",style:{left:t/2-38*i-60,top:e/2-180*i-18.5,width:120,height:37,lineHeight:37,textAlign:"center",fontSize:16,borderRadius:4}}),this.userBtn.onTap(e=>{console.log("\u7528\u6237\u6388\u6743\u6570\u636e\uff1a",e),"getUserInfo:ok"==e.errMsg&&(this.authorizationSuccess(e),this.userBtn.destroy(),this.userBtn=null)})}this.updateAuthorization()}show(){this.moving=!0,this.content.x=-1050;let e=cc.moveTo(.4,-375,0);e.easing(cc.easeInOut(3)),this.content.runAction(cc.sequence(e,cc.callFunc(()=>{this.moving=!1,this.showUserBtn()})))}hide(){if(this.moving)return;this.moving=!0;let e=cc.moveTo(.25,-1050,0);e.easing(cc.easeInOut(3)),this.content.runAction(cc.sequence(e,cc.callFunc(()=>{this.node.active=!1}))),this.hideUserBtn()}openMinGame(e){let t=e.node.minigame;console.log(t),window.wx&&s.default.openMiniGame(t)}authorizationSuccess(e){let t=JSON.parse(e.rawData);a.default.uploadInfo.__userInfo.nickname=t.nickName,a.default.uploadInfo.__userInfo.headimgurl=t.avatarUrl,a.default.uploadInfo.__userInfo.sex=t.gender,a.default.uploadInfo.__userInfo.language=t.language,a.default.uploadInfo.__userInfo.province=t.province,a.default.uploadInfo.__userInfo.city=t.city,a.default.uploadInfo.__userInfo.country=t.country,a.default.gameInfo.authorization=!0,a.default.Game.saveData(),this.updateAuthorization()}updateAuthorization(){a.default.gameInfo.authorization?(this.btnAuthorization.active=!1,this.name_frame.active=!0,cc.find("name",this.name_frame).getComponent(cc.Label).string=a.default.uploadInfo.__userInfo.nickname,n.default.loadNetImg(this.head_img.node,a.default.uploadInfo.__userInfo.headimgurl)):(this.btnAuthorization.active=!0,this.name_frame.active=!1)}authorizationClick(){const e=this;wx.getUserInfo({success(t){"getUserInfo:ok"==t.errMsg&&e.authorizationSuccess(t)}})}showUserBtn(){this.userBtn&&this.userBtn.show()}hideUserBtn(){this.userBtn&&this.userBtn.hide()}onEnable(){this.show()}onLoad(){this.init()}};o([l({type:cc.SpriteFrame,displayName:"\u97f3\u6548\u5f00"})],d.prototype,"music_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u97f3\u6548\u5173"})],d.prototype,"music_off",void 0),o([l({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5f00"})],d.prototype,"vibrate_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5173"})],d.prototype,"vibrate_off",void 0),d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/\u4fa7\u8fb9\u680f")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat"}],game_icon:[function(e,t,i){"use strict";cc._RF.push(t,"670e3AeZgBG8JPbbQjI4Ifu","game_icon");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=e("../Modules/utils"),n=e("../Modules/wechat"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.img=null,this.list=[],this.index=0}openMiniGame(){a.default.Game.playClick();let e=this.list[this.index];n.default.openMiniGame(e)}move(){s.default.loadNetImg(this.img,this.list[this.index].images,"png"),this.node.setPosition(277,-245),this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(2,30),cc.rotateTo(2,-30),cc.rotateTo(2,30),cc.rotateTo(2,-30),cc.callFunc(()=>{this.list.length>0&&(this.index+=1,this.index==this.list.length&&(this.index=0),s.default.loadNetImg(this.img,this.list[this.index].images,"png"))}))))}onEnable(){}onLoad(){this.img=cc.find("mask/img",this.node),this.list=n.default.config.box_info.filter(e=>1==e.is_hot),this.move()}};d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/\u6e38\u620ficon")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat"}],gameinfo:[function(e,t,i){"use strict";cc._RF.push(t,"dfcb721qYNMy4sMxYiLfLJX","gameinfo"),Object.defineProperty(i,"__esModule",{value:!0});class o{constructor(){this.mode_list=[0,5,18,27,40,61,74],this.mode_list_name=["normal","ice","shot","dark","wave","crazy","reverse"],this.brick_row=4,this.brick_height=110,this.brick_width=187.5,this.brick_layer=12,this.shot_speed=64,this.speed=10,this.max_haert=300,this.color_list=["purple","orange","green"],this.transition=1,this.bottom=260,this.shot_target=null,this.state="over",this.mode="normal",this.type="loop",this.socre=0,this.isPause=!1,this.move_top=900,this.level=0,this.isMaxPhone=!1,this.authorization=!1,this.novice_index_list=[]}static get instance(){return this._instance||(this._instance=new o),this._instance}}o._instance=null,i.default=o,cc._RF.pop()},{}],hp:[function(e,t,i){"use strict";cc._RF.push(t,"c7058wZko9JZZejdGnBPRXe","hp");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Modules/wechat"),n=e("../Global"),c=e("../Modules/utils"),l=[{gem:200,hp:10},{gem:380,hp:30},{gem:700,hp:50},{gem:1100,hp:100}],{ccclass:r,property:d,menu:h}=cc._decorator;let u=class extends a.default{constructor(){super(...arguments),this.content=null,this.timeTip=null}getFreeHp(){if(n.default.Game.heart>=n.default.gameInfo.max_haert)return n.default.Game.showToast("\u7231\u5fc3\u5230\u8fbe\u4e0a\u9650\u4e86~");s.default.getReward(function(){n.default.Game.heart+=5,n.default.Game.showToast("\u6210\u529f\u9886\u53d6 5 \u4e2a\u7231\u5fc3~")})}buy(e){let t=e.node.parent.data_index;n.default.Game.gem<l[t].gem?n.default.Game.showToast("\u94bb\u77f3\u4e0d\u8db3\uff0c\u8d2d\u4e70\u5931\u8d25~"):(n.default.Game.gem-=l[t].gem,n.default.Game.heart+=l[t].hp,n.default.Game.showToast("\u8d2d\u4e70\u6210\u529f~"))}init(){this.content=cc.find("content_box/scroll_view/view/content",this.node),this.timeTip=cc.find("content_box/online",this.node).getComponent(cc.Label);let e=cc.find("item",this.content),t=cc.instantiate(e);e.destroy();for(let e=0;e<l.length;e++){const i=l[e],o=cc.instantiate(t);let a=cc.find("btn_gem",o);a.on("click",this.buy,this),cc.find("gem",a).getComponent(cc.Label).string=i.gem.toString(),cc.find("num",o).getComponent(cc.Label).string=i.hp.toString(),o.data_index=e,o.parent=this.content}}timeCount(){let e=c.default.secondFormat(n.default.userData.heart_count);this.timeTip.string=`\u8fd8\u9700\u5728\u7ebf ${e.hour}:${e.minute}:${e.second} \u53ef\u83b7\u5f9710\u4e2a\u7231\u5fc3`}onDisable(){s.default.hideBanner()}onEnable(){this.showMove(this.popBox,function(){s.default.showBanner()})}onLoad(){this.init()}update(e){this.timeCount()}};u=o([r(),h("\u5f39\u51fa\u5c42\u811a\u672c/\u7231\u5fc3\u5546\u5e97")],u),i.default=u,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat","./base":"base"}],interfaces:[function(e,t,i){"use strict";cc._RF.push(t,"131eeTVu2lDpbHk/uivx7qc","interfaces"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],invitation:[function(e,t,i){"use strict";cc._RF.push(t,"dd30axe9VJBsKuKO/Kz3ifd","invitation");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Modules/wechat"),n=e("../Global"),c=e("../Modules/utils"),{ccclass:l,property:r,menu:d}=cc._decorator;let h=class extends a.default{constructor(){super(...arguments),this.content=null,this.item_prefab=null}openShare(){s.default.share()}init(){this.content=cc.find("content_box/item_frame/view/content",this.node);let e=cc.find("item",this.content);this.item_prefab=cc.instantiate(e),e.destroy()}getGem(e){let t=e.node,i=t.parent,o=i.data_openid;console.log("\u9886\u53d6\u597d\u53cbopenid",o),t.active=!1,cc.find("btn_get_off",i).active=!0,n.default.Game.gem+=200,n.default.Game.showToast("\u9886\u53d6\u6210\u529f"),n.default.userData.invitation.push(o),n.default.Game.saveData()}ouputList(e=[]){let t=10;e&&e.length>=10&&(t=e.length);for(let i=0;i<t;i++){const t=e[i]?e[i]:null,o=cc.instantiate(this.item_prefab);let a=cc.find("btn_get_on",o),s=cc.find("btn_get_off",o),l=cc.find("head",o).getComponent(cc.Sprite);if(t){n.default.userData.invitation.some(e=>e==t.openid)?(s.active=!0,a.active=!1):(o.data_openid=t.openid,s.active=!1,a.active=!0,a.on("click",this.getGem,this)),t.headimgurl?c.default.loadNetImg(l.node,t.headimgurl):l.spriteFrame=n.default.Game.head_default}else a.active=!1,s.active=!1,l.node.on("click",this.openShare,this);cc.find("rank",o).getComponent(cc.Label).string=(i+1).toString(),o.parent=this.content}}onDisable(){s.default.hideBanner()}onEnable(){s.default.share(),this.showMove(this.popBox,function(){s.default.showBanner()})}onLoad(){this.init(),window.wx?(s.default.showLoading("\u6570\u636e\u8bf7\u6c42\u4e2d"),s.default.getInviteUser(e=>{s.default.hideLoading(),this.ouputList(e.data),e.data.length},()=>{s.default.hideLoading(),this.ouputList()})):this.ouputList()}};h=o([l(),d("\u5f39\u51fa\u5c42\u811a\u672c/\u9080\u8bf7\u597d\u53cb")],h),i.default=h,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat","./base":"base"}],level:[function(e,t,i){"use strict";cc._RF.push(t,"a992aKv0ClBoqdPrNKQvTbU","level");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=[{x:120,y:100},{x:120,y:292},{x:290,y:292},{x:460,y:292},{x:630,y:292},{x:630,y:484},{x:630,y:676},{x:460,y:676},{x:290,y:676},{x:120,y:676},{x:120,y:868},{x:290,y:868},{x:460,y:868},{x:630,y:868},{x:630,y:1060},{x:460,y:1060},{x:290,y:1060},{x:120,y:1060},{x:120,y:1252},{x:120,y:1444},{x:290,y:1444},{x:460,y:1444},{x:630,y:1444},{x:630,y:1636},{x:460,y:1636},{x:290,y:1636},{x:120,y:1636},{x:120,y:1828},{x:120,y:2020},{x:290,y:2020},{x:460,y:2020},{x:630,y:2020},{x:630,y:2212},{x:460,y:2212},{x:290,y:2212},{x:120,y:2212},{x:120,y:2404},{x:290,y:2404},{x:460,y:2404},{x:630,y:2404},{x:630,y:2596},{x:630,y:2788},{x:460,y:2788},{x:290,y:2788},{x:120,y:2788},{x:120,y:2980},{x:290,y:2980},{x:460,y:2980},{x:630,y:2980},{x:630,y:3172},{x:460,y:3172},{x:290,y:3172},{x:120,y:3172},{x:120,y:3364},{x:290,y:3364},{x:460,y:3364},{x:630,y:3364},{x:630,y:3556},{x:460,y:3556},{x:290,y:3556},{x:120,y:3556},{x:120,y:3748},{x:120,y:3940},{x:290,y:3940},{x:460,y:3940},{x:630,y:3940},{x:630,y:4132},{x:460,y:4132},{x:290,y:4132},{x:120,y:4132},{x:120,y:4324},{x:290,y:4324},{x:460,y:4324},{x:630,y:4324},{x:630,y:4516},{x:630,y:4708},{x:460,y:4708},{x:290,y:4708},{x:120,y:4708},{x:120,y:4900},{x:290,y:4900},{x:460,y:4900},{x:630,y:4900},{x:630,y:5092},{x:460,y:5092},{x:290,y:5092},{x:120,y:5092},{x:120,y:5284},{x:290,y:5284},{x:460,y:5284},{x:630,y:5284},{x:630,y:5476},{x:460,y:5476},{x:290,y:5476},{x:120,y:5476},{x:120,y:5668},{x:290,y:5668},{x:460,y:5668},{x:630,y:5668},{x:630,y:5860},{x:460,y:5860}],n=[{x:460,y:100},{x:288,y:484},{x:460,y:1252},{x:460,y:1828},{x:288,y:2596},{x:460,y:3748},{x:288,y:4516}],{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.level_on=null,this.level_off=null,this.title_on=null,this.title_off=null,this.btnBox=null,this.labelBox=null,this.title_on_tip=[],this.title_off_tip=[],this.label_off=null,this.label_on=null,this.star_on=null,this.star_off=null,this.geme_icon_prefab=null,this.noobPrefab=null,this.noobNode=null}btnClick(e){a.default.Game.playClick();let t=e.node.data_index;if(this.noobNode&&(this.noobNode.destroy(),this.noobNode=null,a.default.userData.frist=!1,a.default.saveData()),a.default.userData.level<t)return a.default.Game.showToast("\u9700\u8981\u5b8c\u6210\u7b2c"+(t-1)+"\u5173\u5f00\u542f");if(t>0){if(a.default.Game.heart<1)return a.default.Game.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u7231\u5fc3\u503c\u5f00\u59cb\u6e38\u620f\u4e86~"),void a.default.Game.openHpBox();a.default.Game.heart-=1,a.default.Game.showHeartTip()}a.default.gameInfo.level=t;let i=0,o=a.default.gameInfo.mode_list;for(let e=o.length-1;e>=0;e--){if(t>=o[e]){i=e;break}}let s=a.default.gameInfo.mode_list_name[i];a.default.gameInfo.type="level",a.default.gameInfo.mode=s,a.default.Game.pageSwitch("game",function(){a.default.Game.startGame()})}titleClick(e){a.default.Game.playClick();let t=e.node.data_index,i=a.default.gameInfo.mode_list_name[t],o=a.default.gameInfo.mode_list[t],s=a.default.userData.unlock_mode.some(e=>e==i);if(a.default.userData.level<o&&!s)return a.default.Game.openModeSwitch(t);a.default.Game.pageSwitch("game",function(){a.default.gameInfo.type="loop",a.default.gameInfo.mode=i,a.default.Game.startGame()})}updateTitle(e,t){let i=e.getComponent(cc.Sprite),o=cc.find("tip",e).getComponent(cc.Sprite),s=a.default.gameInfo.mode_list_name[t],n=a.default.gameInfo.mode_list[t],c=a.default.userData.unlock_mode.some(e=>e==s);a.default.userData.level>=n||c?(i.spriteFrame=this.title_on,o.spriteFrame=this.title_on_tip[t]):(i.spriteFrame=this.title_off,o.spriteFrame=this.title_off_tip[t])}updateItem(e,t,i){let o=e.getComponent(cc.Sprite),s=t.getComponent(cc.Label),n=e.children;if(a.default.userData.level>=i){if(o.spriteFrame=this.level_on,s.font=this.label_on,t.y=t.data_sizeY,i>0){let e=0;for(let t=0;t<n.length;t++){const o=n[t];if(a.default.userData.level==i)"progress"==o.name?(o.active=!0,o.getComponent(cc.Label).string=a.default.userData.level_progress+"%"):o.active=!1;else if("star"==o.name){o.active=!0;let t=o.getComponent(cc.Sprite);a.default.userData.level_star[i]>e?t.spriteFrame=this.star_on:t.spriteFrame=this.star_off,e+=1}else o.active=!1}}}else{o.spriteFrame=this.level_off,s.font=this.label_off,t.y=t.data_sizeY-20;for(let e=0;e<n.length;e++)n[e].active=!1}}updateSize(){this.node.width=a.default.Game.node.width,this.node.height=a.default.Game.node.height;let e=cc.find("scroll_view",this.node),t=cc.find("view",e),i=cc.find("content",t);e.height=a.default.Game.node.height/2+e.y,t.height=e.height,i.height=s[s.length-1].y+500}init(){let e=cc.find("btn",this.btnBox),t=cc.find("title",this.btnBox),i=cc.find("text",this.labelBox),o=cc.instantiate(e),a=cc.instantiate(t),c=cc.instantiate(i);e.destroy(),t.destroy(),i.destroy();for(let e=0;e<s.length;e++){const t=s[e],i=cc.instantiate(o),a=cc.instantiate(c);0==e&&(i.children.forEach(e=>{e.active=!1,"level_tip"==e.name&&(e.active=!0)}),a.active=!1),i.x=t.x,i.y=-t.y,a.x=t.x,a.y=30-t.y,a.data_sizeY=30-t.y,a.getComponent(cc.Label).string=e.toString(),i.data_index=e,i.parent=this.btnBox,a.parent=this.labelBox,i.on("click",this.btnClick,this),this.updateItem(i,a,e)}for(let e=0;e<n.length;e++){const t=n[e],i=cc.instantiate(a);i.x=t.x,i.y=-t.y,i.data_index=e,i.parent=this.btnBox,i.on("click",this.titleClick,this),this.updateTitle(i,e)}}updateLevel(){let e=this.btnBox.children,t=this.labelBox.children;for(let i=0;i<s.length;i++){const o=e[i],a=t[i];this.updateItem(o,a,i)}let i=this.btnBox.children.filter(e=>"title"==e.name);for(let e=0;e<i.length;e++){const t=i[e];this.updateTitle(t,e)}}outputIcon(){if(a.default.userData.level>0){cc.instantiate(this.geme_icon_prefab).parent=cc.find("scroll_view/view/content",this.node)}}BtnMove(){(function(e){let t=cc.scaleTo(1,1.1),i=cc.scaleTo(1,.8);e.runAction(cc.repeatForever(cc.sequence(t,i,t,i)))})(cc.find("scroll_view/view/content/edge/btn_edge",this.node)),function(e){e.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,50,0),cc.moveBy(.25,-50,0))))}(cc.find("scroll_view/view/content/btn_switch_mode/btn",this.node))}checkFrist(){if(a.default.userData.frist){this.noobNode=cc.instantiate(this.noobPrefab),this.noobNode.zIndex=99,this.noobNode.setPosition(-260,-168),this.noobNode.parent=a.default.Game.node,cc.find("arrow",this.noobNode).runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,0,-100),cc.moveBy(.5,0,100))))}}onLoad(){this.updateSize(),this.init(),this.BtnMove(),this.checkFrist()}};o([l({type:cc.SpriteFrame,displayName:"\u5173\u5361\u89e3\u9501\u56fe\u7247"})],d.prototype,"level_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u5173\u5361\u6709\u9501\u56fe\u7247"})],d.prototype,"level_off",void 0),o([l({type:cc.SpriteFrame,displayName:"\u6a21\u5f0f\u89e3\u9501"})],d.prototype,"title_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u6a21\u5f0f\u6709\u9501"})],d.prototype,"title_off",void 0),o([l({type:cc.Node,displayName:"\u6309\u94ae\u8f93\u51fa\u5bb9\u5668"})],d.prototype,"btnBox",void 0),o([l({type:cc.Node,displayName:"label\u8f93\u51fa\u5bb9\u5668"})],d.prototype,"labelBox",void 0),o([l({type:cc.SpriteFrame,displayName:"\u5173\u5361\u8bf4\u660e\u89e3\u9501"})],d.prototype,"title_on_tip",void 0),o([l({type:cc.SpriteFrame,displayName:"\u5173\u5361\u8bf4\u660e\u6709\u9501"})],d.prototype,"title_off_tip",void 0),o([l({type:cc.Font,displayName:"\u6709\u9501\u5b57\u4f53"})],d.prototype,"label_off",void 0),o([l({type:cc.Font,displayName:"\u89e3\u9501\u5b57\u4f53"})],d.prototype,"label_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u661f\u661f\u89e3\u9501"})],d.prototype,"star_on",void 0),o([l({type:cc.SpriteFrame,displayName:"\u661f\u661f\u6709\u9501"})],d.prototype,"star_off",void 0),o([l({type:cc.Prefab,displayName:"\u6e38\u620f icon \u9884\u5236\u4f53"})],d.prototype,"geme_icon_prefab",void 0),o([l({type:cc.Prefab,displayName:"\u65b0\u624b\u6307\u5f15\u9884\u5236\u4f53"})],d.prototype,"noobPrefab",void 0),d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/level")],d),i.default=d,cc._RF.pop()},{"../Global":"Global"}],map:[function(e,t,i){"use strict";cc._RF.push(t,"9f78479MkpDMrqoMZplp/X3","map");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=e("./rule"),{ccclass:n,property:c,menu:l}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.gap_count=0,this.gap_index=0,this.birck_layer=0,this.layer_count=0,this.level_layer=0,this.star_list=[],this.star_count=0,this.brick_progress=0,this.buffer_count=0,this.buffer_speed_list=[],this.next_boom=!1}recoveryBrick(){let e=this.node.children.length;if(e)for(let t=e-1;t>=0;t--){const e=this.node.children[t];a.default.Game.putBrick(e)}}updateHarder(){let e=a.default.gameInfo.mode,t=a.default.gameInfo.socre;switch(a.default.gameInfo.type){case"loop":s.default.loop(e,t);break;case"level":s.default.level(e,t)}}downMove(){if(("start"==a.default.gameInfo.state||"revive"==a.default.gameInfo.state)&&!a.default.gameInfo.isPause&&"wave"!=a.default.gameInfo.mode){let e=s.default.speed_value;this.buffer_count>0&&(e=this.buffer_speed_list[this.buffer_count]),this.node.y-=a.default.gameInfo.speed*(e/100)}}waveMove(){if("wave"!=a.default.gameInfo.mode)return;let e=a.default.gameInfo.isMaxPhone?780:620,t=()=>{let i=cc.moveBy(1,0,-e);i.easing(cc.easeInOut(3));let o=2.4*(100-s.default.speed_value)/100;console.log("\u6ce2\u6d6a\u505c\u7559\u65f6\u95f4",o),this.node.runAction(cc.sequence(i,cc.moveBy(o,0,0),cc.callFunc(function(){t()})))};a.default.Game.scheduleOnce(()=>{t()},1)}darkMove(){if("dark"!=a.default.gameInfo.mode)return;let e=()=>{let t=cc.fadeIn(.6);t.easing(cc.easeInOut(3));let i=cc.fadeOut(.6);i.easing(cc.easeInOut(3)),a.default.WrapGM.darkNode.runAction(cc.sequence(t,cc.moveBy(.3,0,0),i,cc.moveBy(1.5,0,0),cc.callFunc(()=>{e()})))};a.default.Game.scheduleOnce(()=>{e()},1)}sortNode(){this.node.children.sort((e,t)=>t.y-e.y)}noviceListAdd(e){0==a.default.gameInfo.level&&a.default.gameInfo.novice_index_list.push(e)}outputBrick(e=!1){let t=a.default.gameInfo.brick_row,i=0,o=a.default.gameInfo.brick_layer*a.default.gameInfo.brick_row;if(!("level"==a.default.gameInfo.type&&this.layer_count>=this.level_layer)){e||(this.sortNode(),i=this.node.children[0].y,o=a.default.gameInfo.brick_row,i+=a.default.gameInfo.brick_height);for(let e=0;e<o;e++){let o=e%t,n="normal",c=!0;if(this.gap_index==o&&(c=!1),"ice"==a.default.gameInfo.mode&&this.gap_index==o){Math.floor(100*Math.random())+1<=s.default.ice_range&&(n="ice",c=!0)}"shot"==a.default.gameInfo.mode&&(c=!c),"level"==a.default.gameInfo.type&&this.star_list.length>0&&this.star_list[0]==this.layer_count&&this.gap_index!=o&&(this.star_list.shift(),n="star",c=!0),this.next_boom&&"ice"!=n&&"star"!=n&&("shot"==a.default.gameInfo.mode?c||(n="boom",this.next_boom=!1,c=!0):c&&(n="boom",this.next_boom=!1));const l=a.default.Game.getBrick(n,!0,c);if(l.x=o*a.default.gameInfo.brick_width,l.y=i,l.data_layer=this.layer_count,l.data_index=o,l.setParent(this.node),o==t-1){i+=a.default.gameInfo.brick_height,this.layer_count+=1,this.birck_layer+=1;let e=this.gap_index;"level"==a.default.gameInfo.type&&this.star_list.length>0&&this.star_list[0]==this.layer_count?(this.gap_index=this.randomGap(!0,this.gap_index),this.noviceListAdd(this.gap_index)):(this.gap_index=this.randomGap(s.default.increase,this.gap_index),e==this.gap_index&&(this.gap_count+=1,this.gap_count>=3&&(this.gap_index=this.randomGap(!0,this.gap_index),this.gap_count=0)),this.noviceListAdd(this.gap_index)),s.default.boom()&&(this.next_boom=!0,this.gap_index=this.randomGap(!0,e))}}}}randomGap(e=!1,t){let i=a.default.gameInfo.brick_row;if(e){let e=Math.floor(i*Math.random());return e==t?this.randomGap(!0,t):e}return Math.floor(i*Math.random())}outputRowBrick(e,t,i){for(let o=0;o<4;o++){let s=o*a.default.gameInfo.brick_width,n=!1;s==i&&(n=!0);const c=a.default.Game.getBrick("normal",!1,n);c.data_layer=t,c.data_index=o,c.setPosition(s,e),c.setParent(this.node)}}checkBrickRow(){this.sortNode();let e=this.node.children,t=0,i=0;for(let o=e.length-1;o>=0;o--){const s=e[o],n=e[o-1];if(!n){i=0;break}let c=s.data_layer==n.data_layer,l="ice"!=s.data_type,r="ice"!=n.data_type,d=s.active==n.active;if(c&&l&&r&&d){if((i+=1)==a.default.gameInfo.brick_row-1){t=s.y;let i=o+a.default.gameInfo.brick_row-2,n=0,c=!1;for(;n<a.default.gameInfo.brick_row;){const t=e[i];t.data_progress&&(c=!0),"shot"!=a.default.gameInfo.mode&&a.default.Game.outPutBlast(t.x,t.y),a.default.Game.putBrick(t),i--,n++}this.buffer_count>0&&(this.buffer_count-=1),this.birck_layer-=1,a.default.gameInfo.socre+=1,c&&(this.brick_progress+=1),a.default.WrapGM.updateScore(),a.default.Game.vibrateShort(),a.default.Game.playEliminateAudio(),this.updateHarder();break}}else i=0}if(0==this.node.children.length)return a.default.gameInfo.state="over",void this.scheduleOnce(()=>{a.default.Game.openResult("success")},.1);if(this.sortNode(),i==a.default.gameInfo.brick_row-1)for(let e=this.node.children.length-1;e>=0;e--){const i=this.node.children[e];if(i.y<t&&(i.y+=a.default.gameInfo.brick_height,i.data_layer+=1),i.y>t)break}this.birck_layer<a.default.gameInfo.brick_layer+1&&this.outputBrick(!1)}init(){this.brick_progress=0,this.star_count=0,this.layer_count=0,this.birck_layer=0,this.gap_count=0,this.buffer_count=0,this.buffer_speed_list=[],this.next_boom=!1;let e=a.default.gameInfo.isMaxPhone?1.3:1.2;if(this.node.y=Math.floor(a.default.Game.node.height/e),this.gap_index=this.randomGap(),"level"==a.default.gameInfo.type){if(this.level_layer=s.default.level_layer[a.default.gameInfo.level],0==a.default.gameInfo.level)this.star_list=[0,4,8],a.default.gameInfo.novice_index_list=[],this.gap_index=2,a.default.gameInfo.novice_index_list.push(0),a.default.gameInfo.novice_index_list.push(0),a.default.gameInfo.novice_index_list.push(this.gap_index);else{let e=Math.floor(this.level_layer/3)-1;this.star_list=[e,2*e,3*e]}console.log("\u5173\u5361\u7816\u5757\u603b\u5c42\u6570",this.level_layer),console.log("\u751f\u6210\u661f\u661f\u7684\u5c42\u6570\u5217\u8868",this.star_list)}a.default.gameInfo.socre=0,a.default.WrapGM.updateScore(),s.default.init(),this.outputBrick(!0),this.waveMove(),this.darkMove()}reviveGame(){let e=cc.moveBy(.5,0,a.default.gameInfo.move_top);e.easing(cc.easeInOut(3)),this.node.stopAllActions(),this.node.runAction(cc.sequence(e,cc.callFunc(()=>{this.reviveInit(),a.default.gameInfo.state="revive",this.waveMove(),this.darkMove()})))}reviveInit(){this.buffer_count=3;let e=s.default.speed_value>30?s.default.speed_value:30,t=Math.floor((e-30)/2);this.buffer_speed_list=[e,e,30+2*t,30+t,30]}boomClearBrick(){this.sortNode();let e=0;for(let t=this.node.children.length-1;t>=0;t--){const i=this.node.children[t];if(i.y-a.default.gameInfo.brick_height+this.node.y>a.default.Game.node.height)break;t%a.default.gameInfo.brick_row==0&&(i.data_progress&&(this.brick_progress+=1),"star"==i.data_type&&(this.star_count+=1),a.default.gameInfo.socre+=1,this.birck_layer-=1,e+=1),a.default.Game.outPutBlast(i.x,i.y),a.default.Game.putBrick(i)}if(a.default.WrapGM.updateScore(),0==this.node.children.length)return a.default.gameInfo.state="over",void this.scheduleOnce(()=>{a.default.Game.openResult("success")},.1);for(let t=0;t<e;t++)this.birck_layer<a.default.gameInfo.brick_layer+1&&this.outputBrick(!1)}onEnable(){this.init()}onLoad(){a.default.MapGM=this}lateUpdate(){this.downMove()}};r=o([n(),l("\u6e38\u620f\u811a\u672c/\u7816\u5757\u5bb9\u5668")],r),i.default=r,cc._RF.pop()},{"../Global":"Global","./rule":"rule"}],music:[function(e,t,i){"use strict";cc._RF.push(t,"4c7710YsbNCfb9hbxT++0wS","music");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.themeNames=[],this.content=null,this.gem=150}itemClick(e){let t=e.node,i=t.data_index,o=t.data_unlock;if(console.log("item\u7d22\u5f15",i,"\u662f\u5426\u89e3\u9501",o),o)a.default.userData.music=i,a.default.Game.playBgm(),a.default.Game.saveData(),this.updateSelect();else{if(a.default.Game.gem<this.gem)return a.default.Game.showToast("\u94bb\u77f3\u4e0d\u8db3\uff0c\u8d2d\u4e70\u5931\u8d25~");a.default.Game.gem-=this.gem,a.default.userData.music=i,a.default.userData.music_list.push(i),a.default.Game.showToast("\u8d2d\u4e70\u6210\u529f~"),a.default.Game.saveData(),a.default.Game.playBgm(),this.updateSelect(),t.data_unlock=!0,cc.find("btn_gem",t).active=!1}}updateSelect(){let e=this.content.children;for(let t=0;t<e.length;t++){const i=e[t],o=i.getComponent(cc.Sprite);let s=cc.find("yes",i);a.default.userData.music==t?(s.active=!0,o.spriteFrame=a.default.Game.item_on):(s.active=!1,o.spriteFrame=a.default.Game.item_off)}}init(){this.content=cc.find("view/content",this.node);let e=cc.find("item",this.content),t=cc.instantiate(e);e.destroy();for(let e=0;e<this.themeNames.length;e++){const i=this.themeNames[e],o=cc.instantiate(t),s=o.getComponent(cc.Sprite);cc.find("name",o).getComponent(cc.Sprite).spriteFrame=i;let n=a.default.userData.music_list.some(t=>t==e),c=cc.find("btn_gem",o);n?c.active=!1:(c.active=!0,cc.find("gem",c).getComponent(cc.Label).string=this.gem.toString());let l=cc.find("yes",o);a.default.userData.music==e?(l.active=!0,s.spriteFrame=a.default.Game.item_on):(l.active=!1,s.spriteFrame=a.default.Game.item_off),o.data_unlock=n,o.data_index=e,o.parent=this.content,o.on("click",this.itemClick,this)}}onEnable(){}onLoad(){this.init()}};o([n({type:cc.SpriteFrame,displayName:"\u97f3\u4e50title\u56fe\u7247"})],l.prototype,"themeNames",void 0),l=o([s(),c("\u5f39\u51fa\u5c42\u811a\u672c/\u97f3\u4e50\u5207\u6362")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],novice:[function(e,t,i){"use strict";cc._RF.push(t,"d8b6fT5NfdHZaYnpe5ak/YR","novice");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.arrow=null,this.list=[],this.touchBox=null}startGame(){a.default.gameInfo.state="start",this.touchBox.active=!1;let e=a.default.gameInfo.novice_index_list[this.tip];a.default.WrapGM.shotBrick(e),a.default.WrapGM.tipLighting(e),this.tipMove()}tipMove(){if(this.tip>=3)return this.arrow.stopAllActions(),void(this.node.active=!1);let e=a.default.gameInfo.novice_index_list[this.tip];this.arrow.stopAllActions(),this.arrow.x=this.list[e],this.arrow.y=-(a.default.Game.node.height/2-a.default.gameInfo.bottom),this.arrow.opacity=100,this.arrow.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.fadeIn(.2),cc.moveBy(.5,0,200)),cc.spawn(cc.fadeOut(.1),cc.moveBy(.1,0,-200)))))}onEnable(){this.tip=0,this.touchBox.active=!0,this.tipMove()}onLoad(){a.default.NoviceGM=this,this.arrow=cc.find("arrow",this.node),this.touchBox=cc.find("touch_start",this.node),this.list=[-280,-90,95,285]}};l=o([s(),c("\u6e38\u620f\u811a\u672c/\u6559\u7a0b")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],pause:[function(e,t,i){"use strict";cc._RF.push(t,"3c930MNghFAKLgFF/tPuxbg","pause");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Global"),n=e("../Modules/wechat"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends a.default{playAgain(){if(this.next(),s.default.gameInfo.state="start",s.default.Game.closeNovice(),s.default.Game.backgroundColorSwitch(!0),s.default.WrapGM.stopNodeMove(),s.default.MapGM.recoveryBrick(),s.default.MapGM.init(),s.default.gameInfo.level>0){if(s.default.Game.heart<1)return s.default.Game.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u7231\u5fc3\u503c\u5f00\u59cb\u6e38\u620f\u4e86~"),void s.default.Game.openHpBox();s.default.Game.heart-=1,s.default.Game.showHeartTip()}}backHome(){this.next(),s.default.gameInfo.state="over",s.default.Game.closeNovice(),s.default.WrapGM.stopNodeMove(),s.default.MapGM.recoveryBrick(),s.default.Game.topNode.active=!0,s.default.Game.pageSwitch("home"),s.default.Game.wrapNode.active=!1}next(){this.close(),s.default.gameInfo.isPause=!1,s.default.WrapGM.resumeNodeMove()}onDisable(){n.default.hideBanner()}onEnable(){this.showMove(this.popBox,function(){n.default.showBanner()})}onLoad(){}};d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/\u6682\u505c\u9875\u9762")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/wechat":"wechat","./base":"base"}],rank:[function(e,t,i){"use strict";cc._RF.push(t,"d1bdce6ofFMo6M0NRtDYQQl","rank");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Modules/utils"),n=e("../Global"),c=e("../Modules/wechat"),{ccclass:l,property:r,menu:d}=cc._decorator;let h=class extends a.default{constructor(){super(...arguments),this.subBox=null,this.worldBox=null,this.itemNumber=5,this.cupImg=[],this.world_sp=[],this.friend_sp=[],this.page=0,this.page_max=0,this.rank_list=[],this.item_box=null,this.page_label=null,this.none_data=null,this.btnAuthorization=null,this.selfItem=null,this.userBtn=null,this.share_btn=null}closeBtn(){this.rankSwitch(null,"world"),this.scheduleOnce(()=>{this.hideUserBtn(),this.close()},0)}openShare(){c.default.share()}rankSwitch(e,t){let i=cc.find("content_box/btn_friend",this.node).getComponent(cc.Sprite),o=cc.find("content_box/btn_world",this.node).getComponent(cc.Sprite);switch(t){case"world":this.worldBox.active=!0,window.wx&&(wx.postMessage({action:"hide"}),this.scheduleOnce(()=>{this.subBox.update()},0)),o.spriteFrame=this.world_sp[0],i.spriteFrame=this.friend_sp[1],this.share_btn.y=-600,this.showUserBtn();break;case"friend":this.worldBox.active=!1,window.wx&&(wx.postMessage({action:"show"}),this.scheduleOnce(()=>{this.subBox.update()},0)),i.spriteFrame=this.friend_sp[0],o.spriteFrame=this.world_sp[1],this.share_btn.y=-470,this.hideUserBtn()}}nextPage(){if(this.worldBox.active){if(this.page>=this.page_max-1)return;this.page+=1,this.updateItem()}else window.wx&&(wx.postMessage({action:"next"}),this.scheduleOnce(()=>{this.subBox.update()},0))}previousPage(){if(this.worldBox.active){if(0==this.page)return;this.page-=1,this.updateItem()}else window.wx&&(wx.postMessage({action:"previous"}),this.scheduleOnce(()=>{this.subBox.update()},0))}updateItem(){let e=this.rank_list;this.item_box.children.forEach((t,i)=>{let o=this.page*this.itemNumber+i;if(e[o]){t.active=!0;let i=cc.find("rank",t).getComponent(cc.Label),a=cc.find("cup",t).getComponent(cc.Sprite),c=cc.find("head",t).getComponent(cc.Sprite),l=cc.find("name",t).getComponent(cc.Label),r=cc.find("score",t).getComponent(cc.Label);o<3?(a.node.active=!0,a.spriteFrame=this.cupImg[o],i.node.active=!1):(a.node.active=!1,i.node.active=!0,i.string=(o+1).toString()),e[o].headimgurl?s.default.loadNetImg(c.node,e[o].headimgurl,"jpg"):c.spriteFrame=n.default.Game.head_default,l.string=e[o].nickname,r.string=e[o].value+"\u5173"}else t.active=!1}),0==this.rank_list.length?(this.none_data.active=!0,this.none_data.getComponent(cc.Label).string="\u6682\u65e0\u6570\u636e",this.page_label.string="--/--"):(this.none_data.active=!1,this.page_label.string=this.page+1+"/"+this.page_max)}init(){this.share_btn=cc.find("content_box/sahre",this.node),this.selfItem=cc.find("self",this.worldBox),this.btnAuthorization=cc.find("btn_authorization",this.selfItem),this.item_box=cc.find("content",this.worldBox),this.page_label=cc.find("page-label",this.worldBox).getComponent(cc.Label),this.none_data=cc.find("tip",this.worldBox);let e=cc.find("item",this.item_box),t=cc.instantiate(e);for(let e=1;e<this.itemNumber;e++){cc.instantiate(t).parent=this.item_box}if(window.wx&&!n.default.gameInfo.authorization)if(c.default.compareVersion("2.0.1")<0)this.btnAuthorization.on("click",this.authorizationClick,this);else{const e=wx.getSystemInfoSync().windowHeight,t=wx.getSystemInfoSync().windowWidth;let i=t/375;this.userBtn=wx.createUserInfoButton({type:"text",text:"",style:{left:t/2+94.5*i-38,top:e/2+185*i-18.25,width:76,height:36.5,lineHeight:36.5,textAlign:"center",fontSize:16,borderRadius:4}}),this.userBtn.onTap(e=>{console.log("\u7528\u6237\u6388\u6743\u6570\u636e\uff1a",e),"getUserInfo:ok"==e.errMsg&&(this.authorizationSuccess(e),this.userBtn.destroy(),this.userBtn=null)})}this.updateAuthorization()}showUserBtn(){this.userBtn&&this.userBtn.show()}hideUserBtn(){this.userBtn&&this.userBtn.hide()}testList(){let e=[];for(let t=0;t<51;t++)e.push({openid:"id"+t,nickname:"\u7528\u6237"+(t+1),headimgurl:"",value:t+Math.floor(100*Math.random())});return e.sort((e,t)=>t.score-e.score),e}updataSelf(e,t){if(!e)return;let i=cc.find("cup",this.selfItem),o=cc.find("rank",this.selfItem);t<3?(i.active=!0,i.getComponent(cc.Sprite).spriteFrame=this.cupImg[t],o.active=!1):(o.active=!0,o.getComponent(cc.Label).string=(t+1).toString(),i.active=!1),cc.find("name",this.selfItem).getComponent(cc.Label).string=e.nickname,cc.find("score",this.selfItem).getComponent(cc.Label).string=e.value+"\u5173",e.headimgurl&&s.default.loadNetImg(cc.find("head",this.selfItem),e.headimgurl)}findSelf(){let e=this.rank_list,t=!1,i=c.default.userInfo.openid;console.log("\u81ea\u5df1id",i);for(let o=0;o<e.length;o++)if(e[o].openid==i){this.updataSelf(e[o],o),t=!0;break}if(!t&&n.default.gameInfo.authorization){let e=n.default.uploadInfo.__userInfo,t={nickname:e.nickname,headimgurl:e.headimgurl,value:n.default.userData.level};this.updataSelf(t,998)}}updateAuthorization(){n.default.gameInfo.authorization?this.btnAuthorization.active=!1:this.btnAuthorization.active=!0}authorizationSuccess(e){let t=JSON.parse(e.rawData);n.default.uploadInfo.__userInfo.nickname=t.nickName,n.default.uploadInfo.__userInfo.headimgurl=t.avatarUrl,n.default.uploadInfo.__userInfo.sex=t.gender,n.default.uploadInfo.__userInfo.language=t.language,n.default.uploadInfo.__userInfo.province=t.province,n.default.uploadInfo.__userInfo.city=t.city,n.default.uploadInfo.__userInfo.country=t.country,n.default.gameInfo.authorization=!0,n.default.Game.saveData(),this.updateAuthorization(),this.findSelf()}authorizationClick(){const e=this;console.log("\u7528\u6237\u70b9\u51fb\u6388\u6743"),wx.getUserInfo({success(t){"getUserInfo:ok"==t.errMsg&&e.authorizationSuccess(t)}})}onEnable(){this.showMove(),this.page=0,window.wx?(wx.postMessage({action:"update"}),c.default.showLoading("\u6570\u636e\u8bf7\u6c42\u4e2d"),c.default.getRank(e=>{c.default.hideLoading(),console.log("\u6392\u884c\u699c\u5217\u8868",e),this.rank_list=e.data,this.page_max=Math.ceil(this.rank_list.length/this.itemNumber),this.updateItem(),this.findSelf()},()=>{c.default.hideLoading()}),this.showUserBtn()):(this.rank_list=this.testList(),this.page_max=Math.ceil(this.rank_list.length/this.itemNumber),this.updateItem())}onLoad(){this.init(),this.rankSwitch(null,"world"),this.subBox.enabled=!1}};o([r({type:cc.WXSubContextView,displayName:"\u5b50\u57df\u5bb9\u5668"})],h.prototype,"subBox",void 0),o([r({type:cc.Node,displayName:"\u4e16\u754c\u699c\u5bb9\u5668"})],h.prototype,"worldBox",void 0),o([r({displayName:"item\u6570\u91cf"})],h.prototype,"itemNumber",void 0),o([r({type:cc.SpriteFrame,displayName:"\u5956\u676f\u56fe\u7247"})],h.prototype,"cupImg",void 0),o([r({type:cc.SpriteFrame,displayName:"\u4e16\u754c\u6309\u94ae\u56fe\u7247"})],h.prototype,"world_sp",void 0),o([r({type:cc.SpriteFrame,displayName:"\u597d\u53cb\u6309\u94ae\u56fe\u7247"})],h.prototype,"friend_sp",void 0),h=o([l(),d("\u5f39\u51fa\u5c42\u811a\u672c/\u6392\u884c\u699c")],h),i.default=h,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat","./base":"base"}],result:[function(e,t,i){"use strict";cc._RF.push(t,"e04baGbSNxC94ivykB4DxxI","result");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Global"),n=e("../Modules/wechat"),c=e("../Modules/utils"),{ccclass:l,property:r,menu:d}=cc._decorator;let h=class extends a.default{constructor(){super(...arguments),this.titleImg=[],this.starImg=[],this.title=null,this.starBox=null,this.progressBox=null,this.btnRank=null,this.btnNext=null,this.btnShare=null,this.btnHome=null,this.btnAgain=null,this.btnRevive=null}openMinGame(e){let t=e.node.minigame;console.log(t),window.wx&&n.default.openMiniGame(t)}init(){this.title=cc.find("content/title",this.node).getComponent(cc.Sprite),this.starBox=cc.find("content/star-box",this.node),this.progressBox=cc.find("content/progress-box",this.node),this.btnRank=cc.find("content/result_rank",this.node),this.btnNext=cc.find("content/result_next",this.node),this.btnShare=cc.find("content/result_share",this.node),this.btnHome=cc.find("content/result_home",this.node),this.btnAgain=cc.find("content/result_again",this.node),this.btnRevive=cc.find("content/btn_revive",this.node);let e=cc.find("content/result_box/view/content",this.node),t=cc.find("item",e),i=cc.instantiate(t);t.destroy();let o=n.default.config.box_info;for(let t=0;t<o.length;t++){const a=o[t],s=cc.instantiate(i),n=cc.find("img",s);c.default.loadNetImg(n,a.images,"png"),s.minigame=a,s.parent=e,s.on("click",this.openMinGame,this)}o.length>3&&this.scheduleOnce(()=>{let t=e.width+20;for(let t=0;t<4;t++){const i=cc.instantiate(e.children[t]),a=cc.find("img",i);c.default.loadNetImg(a,o[t].images,"png"),i.minigame=o[t],i.parent=e,i.on("click",this.openMinGame,this)}e.runAction(cc.repeatForever(cc.sequence(cc.moveTo(3*o.length,-t,0),cc.callFunc(()=>{e.x=0}))))},0)}checkType(){let e=this.node.data_type,t="success"==e?0:1;switch(this.title.spriteFrame=this.titleImg[t],this.starBox.active=this.progressBox.active=!1,this.btnRank.active=this.btnNext.active=!1,this.ringNode.active=!1,this.btnShare.active=!0,this.btnRevive.active=!1,this.btnHome.x=-75,this.btnAgain.x=75,e){case"success":this.starBox.active=!0,this.btnNext.active=!0,this.ringNode.active=!0,this.starBox.children.forEach(e=>{"star"==e.name?e.getComponent(cc.Sprite).spriteFrame=this.starImg[1]:e.active=!1});let i=s.default.MapGM.star_count;for(let e=0;e<i;e++)this.starBox.children[e].getComponent(cc.Sprite).spriteFrame=this.starImg[0];if(i>s.default.userData.level_star[s.default.gameInfo.level]&&(s.default.userData.level_star[s.default.gameInfo.level]=i),3==i){cc.find("gem_bg",this.starBox).active=!0,cc.find("diamond",this.starBox).active=!0;let e=cc.find("gem",this.starBox).getComponent(cc.Label),t=15;e.node.active=!0,e.string=t.toString(),s.default.Game.gem+=t}s.default.gameInfo.level==s.default.userData.level&&(s.default.userData.level+=1,s.default.userData.level>101&&(s.default.userData.level=101),s.default.userData.level_progress=0),s.default.Game.playSuccessAudio();break;case"fail":this.progressBox.active=!0,this.btnRank.active=!0,s.default.userData.shield_count<=0&&(this.btnRevive.active=!0,this.btnShare.active=!1,this.btnRank.active=!1,this.btnHome.x=-224,this.btnAgain.x=224);let o=cc.find("now",this.progressBox).getComponent(cc.Label),a=cc.find("best",this.progressBox).getComponent(cc.Label),n=Math.floor(s.default.MapGM.brick_progress/s.default.MapGM.level_layer*100);s.default.gameInfo.level==s.default.userData.level&&n>s.default.userData.level_progress&&(s.default.userData.level_progress=n);let c=s.default.gameInfo.level==s.default.userData.level?s.default.userData.level_progress:100;o.string=n.toString(),a.string=c.toString()}s.default.Game.saveData()}openShare(){n.default.share()}backHome(){this.close(),s.default.WrapGM.stopNodeMove(),s.default.MapGM.recoveryBrick(),s.default.Game.topNode.active=!0,s.default.Game.pageSwitch("home"),s.default.Game.wrapNode.active=!1}playAgain(){if(s.default.gameInfo.level>0){if(s.default.Game.heart<1)return s.default.Game.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u7231\u5fc3\u503c\u5f00\u59cb\u6e38\u620f\u4e86~"),void s.default.Game.openHpBox();s.default.Game.heart-=1,s.default.Game.showHeartTip()}this.close(),s.default.gameInfo.state="start",s.default.Game.backgroundColorSwitch(!0),s.default.WrapGM.stopNodeMove(),s.default.MapGM.recoveryBrick(),s.default.MapGM.init()}playNext(){if(101==s.default.gameInfo.level)return s.default.Game.showToast("\u66f4\u591a\u5173\u5361\u656c\u8bf7\u671f\u5f85~");if(s.default.Game.heart<1)return s.default.Game.showToast("\u6ca1\u6709\u8db3\u591f\u7684\u7231\u5fc3\u503c\u5f00\u59cb\u6e38\u620f\u4e86~"),void s.default.Game.openHpBox();s.default.Game.heart-=1,s.default.Game.showHeartTip(),this.close(),s.default.gameInfo.level+=1;let e=s.default.gameInfo.mode_list,t=null;for(let i=e.length-1;i>=0;i--){const o=e[i];if(s.default.gameInfo.level>=o){t=s.default.gameInfo.mode_list_name[i];break}}console.log("=========================="),console.log("\u4e0b\u4e00\u5173\u6e38\u620f\u6a21\u5f0f",t,"\u4e0b\u4e00\u5173",s.default.gameInfo.level),console.log("=========================="),s.default.gameInfo.mode=t,s.default.gameInfo.state="start",s.default.Game.backgroundColorSwitch(!0),s.default.WrapGM.stopNodeMove(),s.default.MapGM.recoveryBrick(),s.default.MapGM.init()}openRank(){s.default.Game.openRank()}nextGame(){const e=this;n.default.getReward(function(){e.close(),s.default.MapGM.reviveGame(),s.default.Game.playReviveAudio()})}onDisable(){n.default.hideBanner()}onEnable(){this.checkType(),this.showMove(this.popBox,function(){n.default.showBanner()})}onLoad(){this.init(),this.ringMove()}};o([r({type:cc.SpriteFrame,displayName:"title\u56fe\u7247"})],h.prototype,"titleImg",void 0),o([r({type:cc.SpriteFrame,displayName:"\u661f\u661f\u56fe\u7247"})],h.prototype,"starImg",void 0),h=o([l(),d("\u5f39\u51fa\u5c42\u811a\u672c/\u7ed3\u7b97\u9875\u9762")],h),i.default=h,cc._RF.pop()},{"../Global":"Global","../Modules/utils":"utils","../Modules/wechat":"wechat","./base":"base"}],revive:[function(e,t,i){"use strict";cc._RF.push(t,"a588ay8NgBFOr+UF0Pes7IV","revive");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Global"),n=e("../Modules/wechat"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends a.default{constructor(){super(...arguments),this.ringProgress=null,this.countLabel=null,this.reviveBtn=null,this.shieldBtn=null,this.count=100,this.stop=!1,this.consume=1,this.surplusLabel=null,this.surplusTip=null,this.banner_count=0,this.thanksNode=null}countMove(){if(!this.stop){this.count-=10/60,this.ringProgress.progress=this.count/100;let e=Math.floor(this.count/10);e+=1,this.countLabel.string=e.toString(),this.count<=0&&(this.stop=!0,this.next())}}updateBtn(){this.shieldBtn.active=this.reviveBtn.active=!1,s.default.Game.shield>=this.consume?this.reviveBtn.active=!0:this.shieldBtn.active=!0}init(){if(this.count=100,this.stop=!1,this.ringProgress.progress=1,this.countLabel.string="10",cc.find("num",this.reviveBtn).getComponent(cc.Label).string=this.consume.toString(),"level"==s.default.gameInfo.type){this.surplusTip.active=!0;let e=Math.floor(s.default.MapGM.brick_progress/s.default.MapGM.level_layer*100);this.surplusLabel.string=(100-e).toString()}else this.surplusLabel.string="",this.surplusTip.active=!1;this.updateBtn()}next(){this.close(),"level"==s.default.gameInfo.type?(s.default.Game.closeNovice(),s.default.Game.openResult("fail")):s.default.Game.loopNext()}getRevive(){this.close(),s.default.Game.shield-=this.consume,s.default.MapGM.reviveGame(),s.default.Game.playReviveAudio()}getShield(){let e=()=>{let e=s.default.userData.shield_count>=3?3:s.default.userData.shield_count;s.default.userData.shield_count-=e,s.default.Game.shield+=e,this.updateBtn()};0!=n.default.config.is_share?n.default.isShare()?n.default.share(()=>{e()}):(this.stop=!0,n.default.showVideo(()=>{this.stop=!1,e()},()=>{this.stop=!1})):e()}showBanner(){this.thanksNode.y=-520,n.default.showBanner()}onDisable(){n.default.hideBanner()}onEnable(){this.thanksNode.y=-520,this.banner_count=0,this.showMove(this.popBox,()=>{0==n.default.config.is_share?n.default.showBanner():(this.thanksNode.y=-760,this.banner_count=42)}),this.init()}onLoad(){this.surplusLabel=cc.find("content/surplus",this.node).getComponent(cc.Label),this.surplusTip=cc.find("content/tip_surplus",this.node),this.thanksNode=cc.find("content/thanks",this.node)}lateUpdate(){this.countMove(),this.banner_count>0&&(this.banner_count-=1,0==this.banner_count&&this.showBanner())}};o([l({type:cc.ProgressBar,displayName:"\u5706\u73af\u8fdb\u5ea6"})],d.prototype,"ringProgress",void 0),o([l({type:cc.Label,displayName:"\u5012\u8ba1\u65f6"})],d.prototype,"countLabel",void 0),o([l({type:cc.Node,displayName:"\u590d\u6d3b\u6309\u94ae\u8fdb\u5ea6"})],d.prototype,"reviveBtn",void 0),o([l({type:cc.Node,displayName:"\u83b7\u53d6\u62a4\u76fe\u6309\u94ae"})],d.prototype,"shieldBtn",void 0),d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/\u590d\u6d3b\u9875\u9762")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/wechat":"wechat","./base":"base"}],rule:[function(e,t,i){"use strict";cc._RF.push(t,"85181z46+JJ67zFs40IKs8e","rule"),Object.defineProperty(i,"__esModule",{value:!0});const o=new class{constructor(){this.scoreList=[2,5,10,20,30,40,50,60,70,80,90,100,110,150,200,210,230],this.normal=[30,36,38,40,42,44,46,48,50,52,54,55,56,57,58,59,60],this.ice=[30,36,38,40,41,42,44,45,46,47,48,49,50,52,54,56,58],this.shot=[34,38,42,46,50,52,53,54,55,56,58,60,62,63,64,65,66],this.dark=[30,36,38,40,41,42,44,46,48,50,51,52,53,54,55,56,58],this.wave=[30,36,38,40,42,44,46,48,50,52,54,55,56,57,58,59,60],this.crazy=[40,50,55,60,62,64,66,68,70,71,72,73,74,75,76,77,78],this.reverse=[30,35,36,38,39,40,41,42,43,44,45,46,48,50,52,54,56],this.speed_value=10,this.increase=!1,this.ice_range=50,this.dark_time=5,this.level_layer=[13,40,45,50,55,40,45,50,55,60,70,75,80,90,100,105,110,115,60,70,80,90,100,110,120,130,135,45,50,60,70,80,90,100,110,120,130,140,150,160,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,50,60,70,80,90,100,110,120,130,140,150,160,170,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170],this.boom_init_val=-500,this.boom_rate=-500,this.step=0}init(){this.speed_value=25,this.increase=!1,this.ice_range=15,this.dark_time=5,this.boom_rate=this.boom_init_val,this.setStep()}iceRange(e){(e>=2&&e<=7||e>=20&&e<=28||e>=36&&e<=46||e>=70&&e<=75||e>=100&&e<=120)&&(this.ice_range+=1)}increaseRange(e){(e%50==0&&e>50||45==e)&&(this.increase=!this.increase)}loop(e,t){let i=this[e];if(t>230)t%5==0&&(this.speed_value+=1);else for(let e=0;e<this.scoreList.length;e++)this.scoreList[e]==t&&(this.speed_value=i[e]);this.increaseRange(t),"ice"==e&&this.iceRange(t),this.speed_value>=100&&(this.speed_value=100)}level(e,t){let i=this[e];if("crazy"==e)1==t&&(this.speed_value=50),t%5==0&&(this.speed_value+=1);else for(let e=0;e<this.scoreList.length;e++)this.scoreList[e]==t&&(this.speed_value=i[e]);this.increaseRange(t),"ice"==e&&this.iceRange(t),this.speed_value>=100&&(this.speed_value=100)}boom(){return this.boom_rate+=this.step,Math.floor(1e3*Math.random())+1<=this.boom_rate&&(this.boom_rate=this.boom_init_val,this.setStep(),!0)}setStep(){let e=[40,30,20,10],t=0,i=Math.floor(100*Math.random())+1,o=0;for(let a=0;a<e.length;a++)if(i<=(o+=e[a])){t=a;break}this.step=[10,15,20,25][t]}};i.default=o,cc._RF.pop()},{}],sdk_count:[function(e,t,i){"use strict";cc._RF.push(t,"ae839Ox8WBFIJBGIf0LLNbD","sdk_count"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("./zs");const a=new class{constructor(){this.event_list={pause:{id:"ep2019041004312",default:"nt2019041027178"},playAgain:{id:"ie2019041076858",default:"ds2019041063111"},unlock:{id:"tw2019041072341",ice:"zm2019041029110",shot:"jo2019041000256",dark:"yb2019041024882",wave:"de2019041093039",crazy:"lw2019041076137",reverse:"wg2019041092892"},revive:{id:"dh2019041051217",level:"zc2019041027739",loop:"ru2019041048423"},shield:{id:"rz2019041095130",success:"uw2019041026555",fail:"tr2019041014117",video:"al2019041095679"},hp:{id:"ma2019041069061",success:"ae2019041061558",fail:"oa2019041060945",video:"io2019041009635"},shop:{id:"yu2019041059225",theme:"lk2019041091873",music:"wf2019041072984"},gamebox:{id:"sc2019041084926",default:"wt2019041036899"},invitation:{id:"hf2019041064732",success:"xo2019041009367",gem:"gz2019041075095"}}}sdkInit(e){let t=null,i=wx.getSystemInfoSync(),a=i.brand+"-"+i.model;t=wx.getLaunchOptionsSync();let{query:s={},scene:n="",referrerInfo:c={}}=t,l=e.data.id,{channel_id:r="",inviter_id:d="",share_img_id:h=""}=s,{appId:u=""}=c,{version:f=""}=i;wx.getNetworkType({success(t){o.default.init({id:l,miniId:165,openid:e.data.openid,channel_id:r,inviter_id:d,share_id:h,networkType:t.networkType,scene:n,client:a,appId:u,version:f,reg_time:e.data.add_time})}})}count(e,t){let i=this.event_list[e];o.default.eventStat({parent_key:i.id,key:i[t]})}};i.default=a,cc._RF.pop()},{"./zs":"zs"}],shield:[function(e,t,i){"use strict";cc._RF.push(t,"02291ht5DBNPpDQ0GUT2ev1","shield");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Modules/wechat"),n=e("../Global"),{ccclass:c,property:l,menu:r}=cc._decorator;let d=class extends a.default{constructor(){super(...arguments),this.tip=null}getShield(e){let t=e;e||(t=n.default.userData.shield_count>=3?3:n.default.userData.shield_count),n.default.Game.shield+=t,n.default.userData.shield_count-=t,n.default.Game.showToast("\u6210\u529f\u9886\u53d6 "+t+" \u4e2a\u62a4\u76fe~"),this.updateTip()}share(){if(n.default.userData.shield_count<=0)return n.default.Game.showToast("\u4eca\u5929\u9886\u53d6\u62a4\u76fe\u4e2a\u6570\u5df2\u7ecf\u7528\u5b8c\u4e86~");0!=s.default.config.is_share&&window.wx?s.default.share(()=>{this.getShield(1)}):this.getShield(1)}video(){if(n.default.userData.shield_count<=0)return n.default.Game.showToast("\u4eca\u5929\u9886\u53d6\u62a4\u76fe\u4e2a\u6570\u5df2\u7ecf\u7528\u5b8c\u4e86~");0!=s.default.config.is_share&&window.wx?s.default.getReward(()=>{this.getShield()}):this.getShield()}updateTip(){n.default.userData.shield_count<=0?this.tip.string="\uff08\u4eca\u5929\u9886\u53d6\u62a4\u76fe\u4e2a\u6570\u5df2\u7ecf\u7528\u5b8c\u4e86~\uff09":this.tip.string="\uff08\u4eca\u5929\u5269\u4f59\u9886\u53d6\u62a4\u76fe\u4e2a\u6570\uff1a"+n.default.userData.shield_count+"\uff09"}onDisable(){s.default.hideBanner()}onEnable(){this.updateTip(),this.showMove(this.popBox,function(){s.default.showBanner()})}onLoad(){this.tip=cc.find("content_box/count_tip",this.node).getComponent(cc.Label)}};d=o([c(),r("\u5f39\u51fa\u5c42\u811a\u672c/\u62a4\u76fe\u5546\u5e97")],d),i.default=d,cc._RF.pop()},{"../Global":"Global","../Modules/wechat":"wechat","./base":"base"}],shop:[function(e,t,i){"use strict";cc._RF.push(t,"d59c0e9nPdN95DvfsixP1/X","shop");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("./base"),s=e("../Modules/wechat"),{ccclass:n,property:c,menu:l}=cc._decorator;let r=class extends a.default{constructor(){super(...arguments),this.theme_img=[],this.music_img=[],this.themeBtn=null,this.musicBtn=null,this.themeBox=null,this.musicBox=null}btnSwitch(e,t){switch(t){case"theme":this.themeBtn.spriteFrame=this.theme_img[0],this.musicBtn.spriteFrame=this.music_img[1],this.musicBox.active=!1,this.themeBox.active=!0;break;case"music":this.themeBtn.spriteFrame=this.theme_img[1],this.musicBtn.spriteFrame=this.music_img[0],this.themeBox.active=!1,this.musicBox.active=!0}}onDisable(){s.default.hideBanner()}onEnable(){this.showMove(this.popBox,function(){s.default.showBanner()})}onLoad(){this.themeBtn=cc.find("content/theme",this.node).getComponent(cc.Sprite),this.musicBtn=cc.find("content/music",this.node).getComponent(cc.Sprite),this.themeBox=cc.find("content/theme_box",this.node),this.musicBox=cc.find("content/music_box",this.node),this.btnSwitch(null,"theme")}};o([c({type:cc.SpriteFrame,displayName:"\u4e3b\u9898\u6309\u94ae\u56fe\u7247"})],r.prototype,"theme_img",void 0),o([c({type:cc.SpriteFrame,displayName:"\u97f3\u4e50\u6309\u94ae\u56fe\u7247"})],r.prototype,"music_img",void 0),r=o([n(),l("\u5f39\u51fa\u5c42\u811a\u672c/shop")],r),i.default=r,cc._RF.pop()},{"../Modules/wechat":"wechat","./base":"base"}],spot:[function(e,t,i){"use strict";cc._RF.push(t,"8568a5KIT5OHJ0LRXYrsX/y","spot");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.width=0,this.height=0,this.direction=1,this.speedY=0,this.speedX=0}init(){let e=Math.floor(3*Math.random())-1;this.direction=Math.floor(2*Math.random())>0?1:-1,this.speedY=Math.floor(5*Math.random())+1,this.speedX=(Math.floor(10*Math.random())+1)/10,this.node.width=Math.floor(150*Math.random())+150,this.node.height=this.node.width,this.node.x=this.width*e,this.node.y=this.height+this.node.width/2;let t=[{r:255,g:255,b:255},{r:115,g:255,b:68},{r:255,g:212,b:0},{r:85,g:72,b:255}],i=t[Math.floor(t.length*Math.random())];this.node.color=cc.color(i.r,i.g,i.b)}move(){this.node.x+=this.speedX*this.direction,this.node.y-=this.speedY,this.node.y<=-this.height&&this.init();let e=a.default.Game.node.width/2;this.node.x+this.node.width/2>=e&&(this.direction=-1),this.node.x-this.node.width/2<=-e&&(this.direction=1)}onEnable(){}onLoad(){this.width=a.default.Game.node.width/4,this.height=a.default.Game.node.height/2,this.init()}update(e){this.move()}};l=o([s,c("\u6e38\u620f\u811a\u672c/\u5149\u5708\u8fd0\u52a8")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],star:[function(e,t,i){"use strict";cc._RF.push(t,"ddab3tlHZNK85/vUfIMY8Ni","star");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=[{x:-100,y:-70},{x:-146,y:80},{x:0,y:157},{x:146,y:80},{x:100,y:-70}],{ccclass:n,property:c,menu:l}=cc._decorator;let r=class extends cc.Component{constructor(){super(...arguments),this.star1=null,this.star2=null,this.outNodes=[]}init(){for(let e=0;e<this.outNodes.length;e++){const t=this.outNodes[e];t.setPosition(0,0),t.setScale(0,0)}this.star2.setScale(0,0),this.star1.setScale(0,0),this.node.opacity=255}moveFinish(){this.init(),a.default.Game.putStar(this.node)}playMove(){this.star1.runAction(cc.scaleTo(.26,1.2,1.2)),this.scheduleOnce(()=>{this.star2.runAction(cc.sequence(cc.scaleTo(.26,1.2,1.2),cc.callFunc(()=>{this.node.runAction(cc.sequence(cc.fadeOut(.13),cc.callFunc(()=>{this.moveFinish()})))}))),this.spreadMove()},.13)}spreadMove(){for(let e=0;e<this.outNodes.length;e++){const t=this.outNodes[e],i=s[e];t.runAction(cc.spawn(cc.moveTo(.26,i.x,i.y),cc.scaleTo(.26,1,1)))}}onEnable(){this.playMove()}onLoad(){this.init()}};o([c({type:cc.Node,displayName:"\u900f\u660e\u661f\u661f"})],r.prototype,"star1",void 0),o([c({type:cc.Node,displayName:"\u4e2d\u95f4\u661f\u661f"})],r.prototype,"star2",void 0),o([c({type:cc.Node,displayName:"\u5916\u5c42\u661f\u661f"})],r.prototype,"outNodes",void 0),r=o([n(),l("\u6e38\u620f\u811a\u672c/\u661f\u661f\u52a8\u753b")],r),i.default=r,cc._RF.pop()},{"../Global":"Global"}],static_data:[function(e,t,i){"use strict";cc._RF.push(t,"8a00cyrRiVG646Y0cPwVcq1","static_data"),Object.defineProperty(i,"__esModule",{value:!0});i.default={is_share:0,offline_limit_time:14400,share_group_interval:2,ad_video_num:3,share_info:[{id:322,applications_id:0,miniprogram_id:165,title:"\u97f3\u4e50\u7816\u5757\u8d85\u723d\u65b0\u73a9\u6cd5\u6765\u88ad\uff01\u5feb\u6765\u4e00\u8d77\u95ef\u5173\u5427~",images:"http://oss.mengjukeji.com/417/2019-04-10/bbb767a15802e7edf6215325504859c6.jpg",pos:[""],status:1,sort:255,add_time:1554284068}],box_info:[{id:2,images:"http://oss.mengjukeji.com/417/2019-03-28/5c4125a62027e49f512909b8f8245a89.png",appid:"wx32d5f275966b6d8d",name:"\u6218\u673a\u6765\u4e86",path:"?channel_id=wanbaozhuankuai",poster:"http://oss.mengjukeji.com/417/2018-12-08/81f9c3132d9cb872eb383d2a26d035fe.png",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-22/d63cc60ded54fd66c973dbd86a136ae6.png",is_recommend:1},{id:27,images:"http://oss.mengjukeji.com/417/2019-03-26/e12b71381cc34b2a8eb13a4fea4cd8a7.png",appid:"wx5f3a03ce125b8186",name:"\u667a\u529b\u5927\u4e71\u6597",path:"?channel_id=wanbaozhuankuai",poster:"http://oss.mengjukeji.com/417/2018-12-07/89235efbb304eae5ea3ddf6f8f5cc8c7.jpg",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:0,images2:"http://oss.mengjukeji.com/417/2019-04-02/2a9e8c91e9629bfd82663a90d717dd5b.png",is_recommend:1},{id:41,images:"http://oss.mengjukeji.com/417/2019-03-15/90283e9e0c61e3c7561db15e005f4fa5.png",appid:"wxd75422fd2f631035",name:"\u75af\u72c2\u5927\u9003\u6740",path:"?channel_id=wanbaozhuankuai",poster:"http://oss.mengjukeji.com/417/2018-12-25/f476b7fad90f55e03a4e9f670c6efa76.jpg",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-15/5ab987d6941419ce6e9c146b31af0e3a.png",is_recommend:1},{id:42,images:"http://oss.mengjukeji.com/417/2019-03-26/87aec7e659f1f7906947557b7ff2889e.png",appid:"wx4e05eb84e606c6d0",name:"\u4fc4\u7f57\u65af\u65b9\u5757",path:"?channel_id=wanbaozhuankuai",poster:"",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-26/7c154b88c24d0d93a01109636d04139d.png",is_recommend:1},{id:98,images:"http://oss.mengjukeji.com/417/2019-03-27/536c42011a85bae3e6b6fa6750f4458e.png",appid:"wxf123df6f5dea47b7",name:"\u597d\u53cb\u5207\u6c34\u679c",path:"?channel_id=wanbaozhuankuai",poster:"",type:2,navigate_type:1,is_best:0,is_top:1,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-27/fae3abee8ea15a6cd4175f8dfd9fea61.png",is_recommend:1},{id:100,images:"http://oss.mengjukeji.com/417/2019-01-11/83c8ee79b754d132fee16a05d6210666.jpg",appid:"wxefdc6604930f3194",name:"\u8352\u91ce\u82f1\u96c4",path:"?channel_id=wanbaozhuankuai",poster:"",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-30/89d2b20aaba37f93f624f9d27abe4940.png",is_recommend:1},{id:156,images:"http://oss.mengjukeji.com/417/2019-03-26/db9f20ed3c571dbe7fcf26e874f49a61.png",appid:"wx8ca9bba10c28a7b1",name:"\u6d88\u9664\u6570\u5b57",path:"?channel_id=wanbaozhuankuai",poster:"",type:2,navigate_type:1,is_best:0,is_top:1,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-27/3b9fe9ca1164c48e887cdf27534a1e64.png",is_recommend:1},{id:161,images:"http://oss.mengjukeji.com/417/2019-03-28/2d3444be3de01cf488bd740c20fccfac.png",appid:"wx08bedb642d29f9ca",name:"\u6210\u8bed\u517b\u6210\u8bb0",path:"?channel_id=wanbaozhuankuai",poster:"http://oss.mengjukeji.com/417/2019-02-28/e8b9e7d2ea1b006f2659c3da1a44134e.jpg",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-28/2d3444be3de01cf488bd740c20fccfac.png",is_recommend:1},{id:169,images:"http://oss.mengjukeji.com/417/2019-03-21/00f75c083bc113e6ef7daaa86f07d34f.png",appid:"wx60be1087ef111fa5",name:"\u629b\u51fa\u5730\u7403",path:"?channel_id=wanbaozhuankuai",poster:"http://oss.mengjukeji.com/417/2019-03-21/be0e3a50a7e6fd2bed6dbedc5da63ba6.png",type:2,navigate_type:1,is_best:0,is_top:0,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-03-21/be0e3a50a7e6fd2bed6dbedc5da63ba6.png",is_recommend:1},{id:45,images:"http://oss.mengjukeji.com/417/2019-03-26/430fa051776ef17094733388388740a1.png",appid:"wx737ac3287a2e3eb4",name:"\u6570\u5b57\u4e09\u6d88",path:"?channel_id=wanbaozhuankuai",poster:"",type:2,navigate_type:1,is_best:0,is_top:1,is_hot:1,images2:"http://oss.mengjukeji.com/417/2019-01-31/21f5d5a2cdf53a8dac269c0b1ab7fe30.png",is_recommend:1}]},cc._RF.pop()},{}],switchmode:[function(e,t,i){"use strict";cc._RF.push(t,"0e272EW53xLrrUmhP+h0XX5","switchmode");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),s=e("./base"),n=e("../Modules/wechat"),c=[0,50,50,100,100,200,200],{ccclass:l,property:r,menu:d}=cc._decorator;let h=class extends s.default{constructor(){super(...arguments),this.modeImgs=[],this.lockImgs=[],this.leftBtn=null,this.rightBtn=null,this.modeSprite=null,this.score=null,this.modeIndex=0,this.lockTip=null,this.lockIcon=null,this.lockBtn=null,this.startTip=null}backHome(){a.default.Game.pageSwitch("home"),this.slideHide(this.node)}starGame(){if(a.default.Game.playClick(),!this.startTip.active)return;let e=a.default.gameInfo.mode_list_name[this.modeIndex];a.default.gameInfo.type="loop",a.default.gameInfo.mode=e,this.slideHide(this.node,-200,()=>{a.default.Game.startGame()})}getUnlock(e){let t=a.default.gameInfo.mode_list_name[this.modeIndex],i=e.target.data_gem;if(a.default.Game.gem<i)return a.default.Game.showToast("\u94bb\u77f3\u4e0d\u8db3\uff0c\u89e3\u9501\u5931\u8d25~");a.default.Game.gem-=i,a.default.userData.unlock_mode.push(t),a.default.Game.saveData(),this.checkLock(),a.default.Game.showToast("\u89e3\u9501\u6210\u529f~")}updateScore(){let e=a.default.gameInfo.mode_list_name[this.modeIndex];this.score.string=a.default.userData.best_score[e].toString()}checkLock(){let e=a.default.gameInfo.mode_list_name[this.modeIndex],t=a.default.userData.unlock_mode.some(t=>t==e),i=a.default.userData.level,o=a.default.gameInfo.mode_list[this.modeIndex];this.lockIcon.active=!1,this.lockBtn.active=!1,this.lockTip.node.active=!1,this.startTip.active=!1,i>=o||t?this.startTip.active=!0:(this.lockIcon.active=!0,this.lockBtn.active=!0,this.lockTip.node.active=!0,this.lockTip.spriteFrame=this.lockImgs[this.modeIndex],this.lockBtn.data_gem=c[this.modeIndex],cc.find("gem",this.lockBtn).getComponent(cc.Label).string=c[this.modeIndex].toString())}modeSwitch(e,t){switch(t){case"next":this.modeIndex+=1;break;case"previous":this.modeIndex-=1}this.modeUpdate()}modeUpdate(){this.modeIndex<=0?this.leftBtn.active=!1:this.leftBtn.active=!0,this.modeIndex>=a.default.gameInfo.mode_list_name.length-1?this.rightBtn.active=!1:this.rightBtn.active=!0,this.modeSprite.spriteFrame=this.modeImgs[this.modeIndex],this.updateScore(),this.checkLock()}init(){this.node.width=a.default.Game.node.width,this.node.height=a.default.Game.node.height;let e=cc.find("touch",this.node);e.height=a.default.Game.node.height/2+e.y,this.leftBtn=cc.find("top/left",this.node),this.rightBtn=cc.find("top/right",this.node),this.score=cc.find("top/score",this.node).getComponent(cc.Label),this.modeSprite=cc.find("top/mode",this.node).getComponent(cc.Sprite),this.lockTip=cc.find("touch/lock_tip",this.node).getComponent(cc.Sprite),this.lockIcon=cc.find("touch/lock",this.node),this.lockBtn=cc.find("touch/btn_lock",this.node),this.startTip=cc.find("touch/start_tip",this.node),this.node.zIndex=a.default.Game.topNode.zIndex-1}onDisable(){n.default.hideBanner()}onEnable(){this.slideShow(this.node,-200,function(){n.default.showBanner()}),this.updateScore(),this.checkLock();let e=this.node.data_index;"number"==typeof e&&(this.modeIndex=e,this.modeUpdate())}onLoad(){this.init(),this.modeSwitch(null,"init")}};o([r({type:cc.SpriteFrame,displayName:"\u6a21\u5f0f\u56fe\u7247"})],h.prototype,"modeImgs",void 0),o([r({type:cc.SpriteFrame,displayName:"\u6a21\u5f0f\u89e3\u9501\u8981\u6c42"})],h.prototype,"lockImgs",void 0),h=o([l(),d("\u5f39\u51fa\u5c42\u811a\u672c/\u6a21\u5f0f\u5207\u6362")],h),i.default=h,cc._RF.pop()},{"../Global":"Global","../Modules/wechat":"wechat","./base":"base"}],theme:[function(e,t,i){"use strict";cc._RF.push(t,"b4c3bWc7sdN6o3sHgyoMFsa","theme");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator,l=[0,50,100,150,200,300,400,500];let r=class extends cc.Component{constructor(){super(...arguments),this.themeNames=[],this.content=null}itemClick(e){let t=e.node,i=t.data_index;if(t.data_unlock)a.default.userData.theme=i,a.default.Game.saveData(),this.updateSelect();else{if(a.default.Game.gem<l[i])return a.default.Game.showToast("\u94bb\u77f3\u4e0d\u8db3\uff0c\u8d2d\u4e70\u5931\u8d25~");a.default.Game.gem-=l[i],a.default.userData.theme=i,a.default.userData.skin.push(i),a.default.Game.showToast("\u8d2d\u4e70\u6210\u529f~"),a.default.Game.saveData(),this.updateSelect(),t.data_unlock=!0,cc.find("btn_gem",t).active=!1}}updateSelect(){let e=this.content.children;for(let t=0;t<e.length;t++){const i=e[t],o=i.getComponent(cc.Sprite);let s=cc.find("yes",i);a.default.userData.theme==t?(s.active=!0,o.spriteFrame=a.default.Game.item_on):(s.active=!1,o.spriteFrame=a.default.Game.item_off)}}init(){this.content=cc.find("view/content",this.node);let e=cc.find("item",this.content),t=cc.instantiate(e);e.destroy();for(let e=0;e<this.themeNames.length;e++){const i=this.themeNames[e],o=cc.instantiate(t),s=o.getComponent(cc.Sprite);cc.find("brick",o).getComponent(cc.Sprite).spriteFrame=a.default.bricks[`normal_purple_${e}`],cc.find("theme",o).getComponent(cc.Sprite).spriteFrame=i;let n=cc.find("yes",o);a.default.userData.theme==e?(n.active=!0,s.spriteFrame=a.default.Game.item_on):(n.active=!1,s.spriteFrame=a.default.Game.item_off);let c=a.default.userData.skin.some(t=>t==e),r=cc.find("btn_gem",o);c?r.active=!1:(r.active=!0,cc.find("gem",r).getComponent(cc.Label).string=l[e].toString()),o.data_unlock=c,o.data_index=e,o.parent=this.content,o.on("click",this.itemClick,this)}}onEnable(){}onLoad(){this.init()}};o([n({type:cc.SpriteFrame,displayName:"\u7816\u5757\u4e3b\u9898\u56fe\u7247"})],r.prototype,"themeNames",void 0),r=o([s(),c("\u5f39\u51fa\u5c42\u811a\u672c/\u4e3b\u9898\u5207\u6362")],r),i.default=r,cc._RF.pop()},{"../Global":"Global"}],utils:[function(e,t,i){"use strict";cc._RF.push(t,"1c210qsPZRAR4Q/ASMnEPZG","utils"),Object.defineProperty(i,"__esModule",{value:!0});const o=new class{constructor(){}saveData(e,t){window.localStorage.setItem(e,JSON.stringify(t))}fetchData(e){return window.localStorage.getItem(e)?JSON.parse(window.localStorage.getItem(e)):null}removeData(){window.localStorage.clear()}vibrateLong(){"vibrate"in window.navigator?window.navigator.vibrate(400):window.wx&&wx.vibrateLong&&wx.vibrateLong()}vibrateShort(){"vibrate"in window.navigator?window.navigator.vibrate(15):window.wx&&wx.vibrateShort&&wx.vibrateShort()}timeFormat(e=0){let t,i,o,a,s,n,c;return i=("0"+((t=new Date((new Date).getTime()+24*e*3600*1e3)).getMonth()+1)).slice(-2),o=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),s=("0"+t.getMinutes()).slice(-2),n=("0"+t.getSeconds()).slice(-2),c=`${t.getFullYear()}/${i}/${o} ${a}:${s}:${n}`}secondFormat(e){let t=Math.floor(e),i=0,o=0;return t>60&&(i=Math.floor(t/60),t=Math.floor(t%60),i>60&&(o=Math.floor(i/60),i=Math.floor(i%60))),{hour:o=("0"+o).slice(-2),minute:i=("0"+i).slice(-2),second:t=("0"+t).slice(-2)}}getSecond(e,t){let i=(new Date(e).getTime()-new Date(t).getTime())/1e3;return Math.floor(i)}getDays(e,t){return Math.floor(e.getTime()-t.getTime()/864e5)}filterStr(e){let t=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f%+_]"),i="";for(let o=0;o<e.length;o++)i+=e.substr(o,1).replace(t,"");return i}unitsNumber(e=0){if(0==(e=Math.floor(e)))return 0;let t=Math.floor(Math.log(e)/Math.log(1e3)),i=e/Math.pow(1e3,t);return 0===t?i:(i=(i=i.toFixed(3)).substring(0,i.lastIndexOf(".")+2))+["","k","m","b","f","e","ae","be","ce","de","ee","fe","ge","he","ie"][t]}ranInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}getRandomArrayElements(e,t){let i,o,a=e.length,s=a-t;for(;a-- >s;)i=e[o=Math.floor((a+1)*Math.random())],e[o]=e[a],e[a]=i;return e.slice(s)}shuffleArray(e){return e.sort((e,t)=>Math.random()>.5?-1:1)}zIndexToTop(e,t){if(0!=t){let i=e[t];e.splice(t,1),e.unshift(i)}else console.log("\u5df2\u7ecf\u5904\u4e8e\u7f6e\u9876")}zIndexToBottom(e,t){if(t!=e.length-1){let i=e[t];e.splice(t,1),e.push(i)}else console.log("\u5df2\u7ecf\u5904\u4e8e\u7f6e\u5e95")}rotateAngle(e,t){if(0===t)return e>0?90:e<0?270:0;if(0===e)return t>0?0:180;let i=Math.atan(Math.abs(e)/Math.abs(t));return e>0&&t>0?360-180*i/Math.PI:e>0&&t<0?180+180*i/Math.PI:e<0&&t<0?180-180*i/Math.PI:e<0&&t>0?180*i/Math.PI:void 0}setLoadingBox(e,t){this.loading_box=e,this.loading_box.zIndex=99,this.loading_text=cc.find("text",this.loading_box).getComponent(cc.Label),this.loading_box.parent=t,this.loading_box.active=!1}loadPrefab(e,t=null){this.loading_box.active=!0,this.loading_text.string="0%",cc.loader.loadRes("prefab/"+e,cc.Prefab,(e,t,i)=>{let o=e/t;this.loading_text.string=Math.floor(100*o)+"%"},(e,i)=>{this.loading_box.active=!1,t&&t(i)})}loadImg(e=null,t,i){let o=0;(function a(){o+=1,cc.loader.loadRes(t,cc.SpriteFrame,(t,s)=>{t?(console.log("\u56fe\u7247\u52a0\u8f7d\u9519\u8bef\u91cd\u590d\u52a0\u8f7d\u6b21\u6570 >>",o),o<3&&a()):(e&&(e.getComponent(cc.Sprite).spriteFrame=s),i&&i(s))})})()}loadNetImg(e,t,i="jpg"){cc.loader.load({url:t,type:i},(t,i)=>{e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)})}};i.default=o,cc._RF.pop()},{}],wechat:[function(e,t,i){"use strict";cc._RF.push(t,"9ef4fyYaQpMj7tglCKas4Ao","wechat"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("./wxcontrol");const a=new class extends o.default{constructor(){super()}};i.default=a,cc._RF.pop()},{"./wxcontrol":"wxcontrol"}],wrap:[function(e,t,i){"use strict";cc._RF.push(t,"99c58kADbhOUoZIGYiVBD28","wrap");var o=this&&this.__decorate||function(e,t,i,o){var a,s=arguments.length,n=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(s<3?a(n):s>3?a(t,i,n):a(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(i,"__esModule",{value:!0});const a=e("../Global"),{ccclass:s,property:n,menu:c}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.map=null,this.line=null,this.lighting=null,this.darkNode=null,this.socreLabel=null,this.scorePer=null,this.pauseBtn=null}updateScore(){let e=0;if("level"==a.default.gameInfo.type){let t=Math.floor(a.default.MapGM.brick_progress/a.default.MapGM.level_layer*100);"number"!=typeof t&&(t=0),this.scorePer.active=!0,this.scorePer.x=100==t?140:120,this.socreLabel.string=t.toString(),e=a.default.MapGM.brick_progress}else this.scorePer.active=!1,this.socreLabel.string=a.default.gameInfo.socre.toString(),e=a.default.gameInfo.socre;e%51==0&&e>0&&this.switchColor()}switchColor(){a.default.Game.backgroundColorSwitch(!1);let e=this.map.children;for(let t=0;t<e.length;t++){const i=e[t];if(i.active){i.getComponent("brick").brickColorTransition()}}}openPause(){"over"!=a.default.gameInfo.state&&(a.default.Game.openPause(),this.pauseNodeMove())}init(){this.line.y=a.default.gameInfo.bottom,this.line.x=this.node.width/2,this.lighting.height=a.default.Game.node.height,this.lighting.opacity=0,this.lighting.y=0,this.socreLabel=cc.find("score",this.node).getComponent(cc.Label),this.scorePer=cc.find("score/per",this.node),this.pauseBtn=cc.find("btn_pause",this.node),this.darkNode.width=a.default.Game.node.width,this.darkNode.height=a.default.Game.node.height,this.darkNode.opacity=0;let e=a.default.Game.node.height-100;a.default.gameInfo.isMaxPhone&&(e=a.default.Game.node.height-200);let t=cc.find("btn_pause",this.node),i=cc.find("score",this.node);t.y=cc.find("score",this.node).y=e,t.zIndex=2,i.zIndex=2,this.darkNode.zIndex=1}touch(e){if("start"==a.default.gameInfo.state||"revive"==a.default.gameInfo.state){let t=cc.find("brick",this.node);t&&(a.default.Game.putBrick(t),this.shotFinish());let i=this.node.convertToNodeSpaceAR(e.getLocation()),o=Math.floor(i.x/a.default.gameInfo.brick_width),s=[0,1,2,3];"reverse"==a.default.gameInfo.mode&&s.reverse(),this.shotBrick(s[o]),this.tipLighting(s[o])}}shotBrick(e){a.default.Game.playShotAudio();let t=null,i=this.map.children.filter(t=>t.data_index==e),o=[].concat(i);o.sort((e,t)=>e.y-t.y);let s=e*a.default.gameInfo.brick_width;const n=a.default.Game.getBrick("normal",!1,!0);if(n.setPosition(s,a.default.gameInfo.bottom),"shot"==a.default.gameInfo.mode)t=o[0];else{for(let e=0;e<o.length;e++){const i=o[e];if(i.active||"ice"==i.data_type||"star"==i.data_type){t=i,"normal"==i.data_type&&(t=o[e-1]?o[e-1]:null);break}}t||(t=o[0])}n.data_shot=!0,a.default.gameInfo.shot_target=t,n.setParent(this.node)}checkNovice(){0==a.default.gameInfo.level&&a.default.NoviceGM&&(a.default.NoviceGM.tip+=1,a.default.NoviceGM.tipMove())}shotFinish(){let e=a.default.gameInfo.shot_target,t=e.data_layer-1,i=e.y-a.default.gameInfo.brick_height;switch(e.data_type){case"normal":"shot"==a.default.gameInfo.mode?e.active?(e.active=!1,a.default.MapGM.checkBrickRow(),a.default.Game.outPutBlast(e.x,e.y)):a.default.MapGM.outputRowBrick(i,t,e.x):e.active?a.default.MapGM.outputRowBrick(i,t,e.x):(e.active=!0,a.default.MapGM.checkBrickRow(),this.checkNovice());break;case"ice":a.default.Game.playIceAudio(),a.default.Game.outPutBlast(e.x,e.y,"ice"),e.data_type="normal",e.active=!1,a.default.Game.vibrateShort();break;case"star":a.default.Game.playStarAudio(),this.checkNovice(),e.data_type="normal",e.active=!1,a.default.MapGM.star_count+=1,a.default.Game.vibrateShort(),a.default.Game.outPutstar(e.x,e.y),"shot"==a.default.gameInfo.mode&&a.default.MapGM.checkBrickRow(),a.default.gameInfo.level>0&&this.switchColor();break;case"boom":a.default.Game.vibrateLong(),a.default.Game.playBoomAudio(),a.default.MapGM.boomClearBrick()}a.default.gameInfo.shot_target=null}tipLighting(e){this.lighting.stopAllActions(),this.lighting.x=e*a.default.gameInfo.brick_width,this.lighting.runAction(cc.sequence(cc.fadeIn(.1),cc.fadeOut(.1)))}resumeNodeMove(){this.map.resumeAllActions(),this.darkNode.resumeAllActions()}pauseNodeMove(){this.map.pauseAllActions(),this.darkNode.pauseAllActions()}stopNodeMove(){this.map.stopAllActions(),this.darkNode.stopAllActions(),this.darkNode.opacity=0}onLoad(){a.default.WrapGM=this,this.init(),this.node.on("touchstart",this.touch,this)}};o([n({type:cc.Node,displayName:"\u7816\u5757\u8f93\u51fa\u5bb9\u5668"})],l.prototype,"map",void 0),o([n({type:cc.Node,displayName:"\u706f\u6761"})],l.prototype,"line",void 0),o([n({type:cc.Node,displayName:"\u70b9\u51fb\u6761"})],l.prototype,"lighting",void 0),o([n({type:cc.Node,displayName:"\u6697\u9ed1\u906e\u7f69"})],l.prototype,"darkNode",void 0),l=o([s(),c("\u6e38\u620f\u811a\u672c/\u89e6\u6478\u5c42")],l),i.default=l,cc._RF.pop()},{"../Global":"Global"}],wxcontrol:[function(e,t,i){"use strict";cc._RF.push(t,"176707xRIpBe79AfoO1tpov","wxcontrol"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("./wxnetwork"),a=e("./zs");i.default=class extends o.default{constructor(){super(),this.system=window.wx?wx.getSystemInfoSync():{},this.share_count=0,this.start_share=!1,this.before=new Date,this.bannerAd=null,this.bannerID="adunit-218a5d3482041e3a",this.videoAd=null,this.videoID="adunit-e8db776624a4dc83",this.has_video=!0,this.video_playing=!1,this.video_total=0,this.successReward=null,this.onShow=function(e){},this.onHide=function(){}}compareVersion(e){let t=this.system.SDKVersion.split("."),i=e.split(".");const o=Math.max(t.length,i.length);for(;t.length<o;)t.push("0");for(;i.length<o;)i.push("0");for(let e=0;e<o;e++){const o=Math.floor(Number(t[e])),a=Math.floor(Number(i[e]));if(o>a)return 1;if(o<a)return-1}return 0}getShareInfo(){let e=0;return this.config.share_info.length&&(e=Math.floor(Math.random()*this.config.share_info.length)),{title:this.config.share_info[e].title,imageUrl:this.config.share_info[e].images,query:"inviter_id="+this.userInfo.inviter_id+"&share_img_id="+this.config.share_info[e].id}}getSecond(){let e=((new Date).getTime()-this.before.getTime())/1e3;return Math.floor(e)}share(e){window.wx&&(this.before=new Date,e?(this.start_share=!0,this.successReward=e):(this.start_share=!1,this.successReward=(()=>{})),wx.shareAppMessage(this.getShareInfo()))}initShare(){window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(()=>this.getShareInfo()),wx.onShow(e=>{this.onShow(e),this.start_share&&this.shareCallback(()=>{this.start_share=!1,this.successReward()},()=>{this.start_share=!1})}),wx.onHide(()=>{this.onHide()}))}isShare(e){return!this.has_video}getReward(e,t){if(!window.wx||0==this.config.is_share||!this.has_video)return e();this.isShare(t)?this.share(e):this.showVideo(e)}shareCallback(e,t){const i=this;let o=["\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5","\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4","\u672c\u6b21\u5206\u4eab\u65e0\u6548\uff0c\u8bf7\u5206\u4eab\u5230\u5176\u4ed6\u7fa4"],a=Math.floor(3*Math.random()),s=this.config.share_time?this.config.share_time:1,n=this.config.share_range?this.config.share_range:[100,0,60,80];this.getSecond()<s?i.showConfirm(o[a],"\u7cfb\u7edf\u63d0\u793a\uff1a",function(){i.share(i.successReward)},function(){t&&t()},"\u5206\u4eab\u5230\u7fa4"):(Math.floor(100*Math.random())+1<=n[this.share_count]?e&&e():this.showConfirm(o[a],"\u7cfb\u7edf\u63d0\u793a\uff1a",function(){i.share(i.successReward)},function(){t&&t()},"\u5206\u4eab\u5230\u7fa4"),this.share_count+=1,this.share_count>=n.length&&(this.share_count=0))}initBanner(){window.wx&&this.compareVersion("2.0.4")>=0&&this.bannerID&&(this.bannerAd=wx.createBannerAd({adUnitId:this.bannerID,style:{left:0,top:0,width:this.system.windowWidth}}),this.bannerAd.onResize(e=>{this.bannerAd.style.top=this.system.windowHeight-Math.floor(e.height)}),this.bannerAd.onError(e=>{console.log("init Banner fail !!!",e)}),this.bannerAd.hide())}showBanner(){this.bannerAd&&this.bannerAd.show()}hideBanner(){this.bannerAd&&this.bannerAd.hide()}checkVideo(){if(this.compareVersion("2.0.4")<0||!this.videoID)return this.has_video=!1,void console.log("\u65e0\u89c6\u9891\u53ef\u4f9b\u64ad\u653e >>");this.videoAd=wx.createRewardedVideoAd({adUnitId:this.videoID}),this.videoAd.onError(e=>{this.has_video=!1})}showVideo(e=null,t){if(this.video_playing)return this.showToast("\u89c6\u9891\u8f7d\u5165\u4e2d");this.video_playing=!0;let i=o=>{this.videoAd.offClose(i),void 0==o||void 0==o.isEnded||1==o.isEnded?(this.video_total+=1,this.video_playing=!1,e&&e()):(this.video_playing=!1,this.showToast("\u4f60\u63d0\u524d\u5173\u95ed\u4e86\u89c6\u9891"),t&&t())};this.videoAd.onClose(i),this.videoAd.load().then(()=>{this.videoAd.show()}).catch(e=>{this.has_video=!1,this.video_playing=!1,this.showToast(e.errMsg,"\u89c6\u9891\u5e7f\u544a\u51fa\u9519"),t&&t()})}openService(){const e=this;if(window.wx){if(this.compareVersion("2.0.3")<0)return this.showAlert("\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u5ba2\u670d\u529f\u80fd");wx.openCustomerServiceConversation({success(){},fail(){e.showToast("\u6253\u5f00\u5ba2\u670d\u5bf9\u8bdd\u5931\u8d25")}})}}openMiniGame(e,t,i){if(this.compareVersion("2.2.0")>=0&&1==e.navigate_type)wx.navigateToMiniProgram({appId:e.appid,path:e.path,success(){t&&t(),a.default.boxStat(e)},fail(){i&&i()}});else{let o=e.poster;wx.previewImage({current:o,urls:[o],success(){t&&t(),a.default.boxStat(e)},fail(){i&&i()}})}}checkVersionUpdate(){if(this.compareVersion("1.9.90")>=0){const e=wx.getUpdateManager();e.onCheckForUpdate(e=>{console.log("\u8bf7\u6c42\u5b8c\u65b0\u7248\u672c\u4fe1\u606f\u7684\u56de\u8c03  >>",e.hasUpdate)}),e.onUpdateReady(()=>{this.showConfirm("\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f","\u66f4\u65b0\u63d0\u793a",()=>{e.applyUpdate()})}),e.onUpdateFailed(()=>{this.showAlert("\u7248\u672c\u66f4\u65b0\u4e0b\u8f7d\u5931\u8d25")})}}setKeepLight(){this.compareVersion("1.4.0")>=0&&wx.setKeepScreenOn({keepScreenOn:!0})}},cc._RF.pop()},{"./wxnetwork":"wxnetwork","./zs":"zs"}],wxnetwork:[function(e,t,i){"use strict";cc._RF.push(t,"8004cxUH4BHLrACPLxD2CpV","wxnetwork"),Object.defineProperty(i,"__esModule",{value:!0});const o=e("./wxutils"),a=e("./static_data"),s=e("./sdk_count");i.default=class extends o.default{constructor(){super(),this.baseUrl="https://api.328vip.com/BrickShot",this.userInfo={openid:"",session_key:"",head_cookie:"",inviter_id:"",nickname:"",headimgurl:""},this.config=a.default,this.login_count=0,this.max_count=3}baseRequest(e,t,i,o,a){wx.request({url:this.baseUrl+t,method:e,header:{"content-type":"application/json",cookie:this.userInfo.head_cookie,version:"1.0.7"},data:i,success(e){200==e.data.code?o&&o(e.data,e.header):a&&a(e)},fail(){a&&a()}})}userLogin(e,t){const i=this;let o=wx.getLaunchOptionsSync();function a(){setTimeout(function(){i.login_count>=i.max_count?t&&t():(i.userLogin(e,t),i.showToast("\u91cd\u65b0\u767b\u5f55\u4e2d\uff0c\u9a6c\u4e0a\u5c31\u597d"),console.log("login_fail ===============> count: ",i.login_count),i.login_count+=1)},300)}wx.login({success(t){let n={code:t.code,inviter_id:o.query.inviter_id?o.query.inviter_id:""};i.baseRequest("POST","/user/login",n,(t,o)=>{200==t.code?(i.userInfo.openid=t.data.openid,i.userInfo.session_key=t.data.session_key,i.userInfo.inviter_id=t.data.id,i.userInfo.nickname=t.data.nickname,i.userInfo.headimgurl=t.data.headimgurl,i.userInfo.head_cookie=o["Set-Cookie"],e&&e(t),s.default.sdkInit(t)):a()},e=>{a()})},fail(){a()}})}getSetting(e,t,i){this.baseRequest("GET","/setting/config",{},t=>{this.config=t.data,e&&e(t),i&&i()},e=>{this.showToast("\u8bbe\u7f6e\u6e38\u620f\u6570\u636e\u5931\u8d25"),t&&t(e),i&&i()})}saveData(e,t,i){if(!window.wx)return console.log("\u975e\u5fae\u4fe1\u73af\u5883\u4e0a\u4f20\u6570\u636e\u5931\u8d25");this.baseRequest("POST","/user/setData",e,e=>{200==e.code?t&&t(e):(i&&i(e),console.log("\u4e0a\u4f20\u6570\u636e\u5931\u8d25!!!!!!!!!!!!!!!!!!!!!!!!!!!!",e))},e=>{i&&i(e),console.log("\u4e0a\u4f20\u6570\u636e\u5931\u8d25!!!!!!!!!!!!!!!!!!!!!!!!!!!!",e)})}getData(e,t,i){this.baseRequest("GET","/user/getData",{},o=>{200==o.code?(e&&e(o),i&&i()):(t&&t(o),i&&i(),this.showToast("\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25"))},e=>{t&&t(e),i&&i(),this.showToast("\u83b7\u53d6\u7528\u6237\u6570\u636e\u5931\u8d25")})}getRank(e,t){this.baseRequest("GET","/rank/world",{},i=>{200==i.code?e&&e(i):(t&&t(i),this.showAlert("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25"))},e=>{t&&t(e),this.showAlert("\u83b7\u53d6\u4e16\u754c\u6392\u884c\u699c\u5931\u8d25")})}getInviteUser(e,t){this.baseRequest("POST","/Invite/log",{},i=>{200==i.code?"function"==typeof e&&e(i):("function"==typeof t&&t(i),this.showAlert("\u83b7\u53d6\u9080\u8bf7\u597d\u53cb\u4fe1\u606f\u5931\u8d25"))},e=>{"function"==typeof t&&t(e),this.showAlert("\u83b7\u53d6\u9080\u8bf7\u597d\u53cb\u4fe1\u606f\u5931\u8d25")})}},cc._RF.pop()},{"./sdk_count":"sdk_count","./static_data":"static_data","./wxutils":"wxutils"}],wxutils:[function(e,t,i){"use strict";cc._RF.push(t,"8267ea79CNIK5r3DmW3P++M","wxutils"),Object.defineProperty(i,"__esModule",{value:!0});i.default=class{constructor(){}showLoading(e="\u52a0\u8f7d\u4e2d"){window.wx&&wx.showLoading({title:e,mask:!0})}hideLoading(){window.wx&&wx.hideLoading()}showToast(e="\u63d0\u793a",t="none",i=2e3){window.wx?wx.showToast({title:e,icon:t,duration:i}):alert(e)}showAlert(e,t="\u63d0\u793a",i){window.wx&&wx.showModal({title:t,content:e,showCancel:!1,success(e){i&&i(e)}})}showConfirm(e,t="\u786e\u8ba4\u63d0\u9192",i,o,a="\u786e\u8ba4"){window.wx&&wx.showModal({title:t,content:e,showCancel:!0,confirmText:a,success(e){e.confirm?i&&i():e.cancel&&o&&o()}})}checkLogin(e,t,i){const o=this;wx.login({success(t){wx.getUserInfo({success(i){i.code=t.code,e&&e(i)},fail(){console.log("\u521b\u5efa\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6309\u94ae");let a=wx.createUserInfoButton({type:"text",text:"",style:i});a.onTap(i=>{if(console.log("\u7528\u6237\u6388\u6743\u6570\u636e\uff1a",i),i.code=t.code,"getUserInfo:ok"!=i.errMsg)return o.showAlert("\u6392\u884c\u699c\u529f\u80fd\u9700\u8981\u6388\u6743\u7684\u54e6\uff01");e&&e(i),a.destroy()})}})},fail(){console.log("\u767b\u5f55\u5931\u8d25=====>"),t&&t()}})}},cc._RF.pop()},{}],zs:[function(e,t,i){"use strict";cc._RF.push(t,"cdd89DXPg5A2bJ/E2Ei2qkf","zs"),Object.defineProperty(i,"__esModule",{value:!0});class o{init(e){this.miniprogram_id=e.miniId||0,this.uid=e.id||0,this.openid=e.openid||"",this.reg_time=e.reg_time||0,this.inviter_id=e.inviter_id||0,this.channel_id=e.channel_id||"",this.networkType=e.networkType||"",this.client=e.client||"",this.scene=e.scene||"",this.share_id=e.share_id||0,this.appId=e.appId||"",this.version=e.version||"",this.game_data="",this.getConfig(),this.userInit()}checkInitComplete(){return!!(this.miniprogram_id&&this.openid&&this.reg_time)||(console.log("\u521d\u59cb\u5316\u5931\u8d25"),!1)}getConfig(){if(this.checkInitComplete()){this.parent_key=null,this.key=null;let e=e=>{console.log("\u521d\u59cb\u5316\u914d\u7f6e\u6210\u529f",e);let t=e.data;this.parent_key=t.parent_key||[],this.key=t.key||[]};this.request("/Stat/Index/getConfig",{miniprogram_id:this.miniprogram_id},e)}}userInit(){if(this.checkInitComplete()){let e={miniprogram_id:this.miniprogram_id,uid:this.uid,openid:this.openid,reg_time:this.reg_time,scene:this.scene,share_id:this.share_id||0,channel_id:this.channel_id,appId:this.appId,version:this.version,inviter_id:this.inviter_id,networkType:this.networkType,client:this.client},t=e=>{console.log(e.msg)};this.request("/Stat/Index/init",e,t)}}gameDataStat(e){}eventStat(e){if(this.checkInitComplete())if(this.key&&this.parent_key){if(-1==this.key.indexOf(e.key)||-1==this.parent_key.indexOf(e.parent_key))return void console.log("\u53c2\u4e0e\u7edf\u8ba1id\u4e0d\u5b58\u5728",e.parent_key,e.key);let t={miniprogram_id:this.miniprogram_id,openid:this.openid,reg_time:this.reg_time,channel_id:this.channel_id,key:e.key,parent_key:e.parent_key},i=function(e){console.log(e.msg)};this.request("/Stat/Index/event",t,i)}else console.log("\u7edf\u8ba1\u914d\u7f6e\u672a\u52a0\u8f7d\u5b8c\u6210")}boxStat(e){if(this.checkInitComplete()){let t=e.id;if(!t)return void console.error("\u7edf\u8ba1->\u8df3\u8f6cID\u4e3a\u7a7a");let i={id:t,miniprogram_id:this.miniprogram_id,openid:this.openid,channel_id:this.channel_id,reg_time:this.reg_time},o=function(e){console.log(e.msg)};this.request("/Stat/Index/box",i,o)}}formatURL(e){return"https://service.mengjukeji.com"+e}request(e,t,i,o=!1){let a=this;e=this.formatURL(e);let s=t;var n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(n.status>=200&&n.status<400&&4==n.readyState){let e=n.responseText,t=a.dealWithHttpResponse(e);i&&i(t)}},n.open("POST",e,!0),o)n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(s));else{let e="";for(let t in s)"?"!=e&&""!=e&&(e+="&"),e+=t+"="+encodeURIComponent(s[t]);n.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),n.send(e)}console.log("\u7edf\u8ba1\u8bf7\u6c42\u53d1\u9001Http\u6570\u636e",s)}dealWithHttpResponse(e){if(console.log("\u7edf\u8ba1\u8bf7\u6c42"),"fail"==e)return void console.error("http\u8bf7\u6c42\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u8bf7\u6c42\u53c2\u6570");let t=JSON.parse(e);return console.log("\u7edf\u8ba1\u8bf7\u6c42:",t),t}}i.ZS=o;let a=new o;i.default=a,cc._RF.pop()},{}]},{},["Audio","Main","Menu","blast","brick","gameinfo","map","novice","rule","spot","star","wrap","Global","Load","interfaces","sdk_count","static_data","utils","wechat","wxcontrol","wxnetwork","wxutils","zs","base","edge","game_icon","hp","invitation","level","music","pause","rank","result","revive","shield","shop","switchmode","theme","TheButton"]);