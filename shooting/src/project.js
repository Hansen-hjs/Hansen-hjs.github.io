require=function c(i,r,l){function s(t,e){if(!r[t]){if(!i[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=r[t]={exports:{}};i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,c,i,r,l)}return r[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({Global:[function(e,t,o){"use strict";cc._RF.push(t,"d5750KrxDNOsK39rNjMeaIp","Global"),t.exports={game:null,gameData:{over:!0,score:0,level:1,pack:"",bulletPool:null,blockListPool:null,blastPool:null,baseNum:5,bulletNum:10,forceful:3,listSpacing:800},computeScore:function(){var e=parseInt(this.gameData.baseNum*(1+.2*this.gameData.level)),t=.5-.05*this.gameData.level;t<=.1&&(t=.1);var o=parseInt(e*(1-t));o<1&&(o=1);var a=parseInt(1.5*e);return{score:parseInt(Math.random()*(a-o)+o),maxNum:a}},randomColor:function(e,t){var o=this.computeScore().maxNum;return{r:1==t?240:240-parseInt(e/o*240),g:2==t?210:210-parseInt(e/o*210),b:50}},pageInfo:{shared:!1},shareInfo:{title:"脑残射击",url:"https://color-1255728886.cos.ap-guangzhou.myqcloud.com/img/share_pic_creazybird.png"}},cc._RF.pop()},{}],blockList:[function(e,t,o){"use strict";cc._RF.push(t,"eb3336LXvlB1JNLzQebhcEA","blockList");var h=e("Global");cc.Class({extends:cc.Component,properties:{blockPrefab:{default:null,type:cc.Prefab}},resetBlock:function(e,t,o){var a=10,n=100,c=t/2,i=h.computeScore().score,r=(this.node.width-(c+1)*a)/c,l=o<c?o*(r+a)+a:(o-c)*(r+a)+a,s=o<c?0:110,u=parseInt(2*Math.random())+1;e.width=r,e.height=n,e.datatype=u,e.getComponent(cc.BoxCollider).size.width=r,e.getComponent(cc.BoxCollider).size.height=n,e.getComponent(cc.BoxCollider).offset.x=r/2,e.getComponent(cc.BoxCollider).offset.y=-50,e.getChildByName("boxtext").getComponent(cc.Label).string=i,e.color=new cc.Color(h.randomColor(i,u,h.computeScore().maxNum)),e.setPosition(l,s)},createBlock:function(e,t){var o=cc.instantiate(this.blockPrefab);this.resetBlock(o,e,t),o.parent=this.node,4<t&&(o.active=!1)},createBlockList:function(){for(var e=0;e<10;e++)this.createBlock(10,e)},resetTop:function(){var e=this.node.children.filter(function(e){return"block"==e.name}),t=1<h.gameData.level?parseInt(4*Math.random())+1:0;this.node.setPosition(0,3*h.gameData.listSpacing+this.node.height);for(var o=0;o<e.length;o++)e[o].active=!0,e[o].stopAllActions(),this.resetBlock(e[o],e.length,o);switch(t){case 1:e[0].active=e[4].active=!1,this.blockMove(1,3,e);break;case 2:e[1].active=e[8].active=!1,this.blockMove(9,0,e);break;case 3:e[5].active=e[9].active=!1,this.blockMove(6,8,e);break;case 4:e[3].active=e[6].active=!1,this.blockMove(4,5,e)}},blockMove:function(e,t,o){var a=cc.moveTo(1,o[t].x,o[t].y),n=cc.moveTo(1,o[t].x+o[t].width+10,o[t].y),c=cc.moveTo(1,o[e].x-o[e].width+10,o[e].y),i=cc.moveTo(1,o[e].x,o[e].y),r=cc.repeatForever(cc.sequence(n,a)),l=cc.repeatForever(cc.sequence(c,i));o[t].runAction(r),o[e].runAction(l)},start:function(){this.createBlockList()},update:function(e){this.node.y<=-50?(h.gameData.level=h.gameData.level+=1,console.log("难度系数：",h.gameData.level),this.resetTop()):this.node.y-=3}}),cc._RF.pop()},{Global:"Global"}],block:[function(e,t,o){"use strict";cc._RF.push(t,"e7d0974x19JXpWRfDc9wC/w","block");var n=e("Global");cc.Class({extends:cc.Component,properties:{blastPrefab:{default:null,type:cc.Prefab}},explode:function(){var e=null,t=this.node.x+this.node.width/2,o=this.node.y-this.node.height/2;0<n.gameData.blastPool.size()?e=n.gameData.blastPool.get():(cc.log("重新创建粒子"),e=cc.instantiate(this.blastPrefab)),e.setPosition(t,o),e.parent=this.node.parent,e.getComponent(cc.ParticleSystem).resetSystem(),this.scheduleOnce(function(){n.gameData.blastPool.put(e)},.1)},onCollisionEnter:function(e,t){if("bullet"==e.node.name){var o=this.node.getChildByName("boxtext").getComponent(cc.Label),a=this.node.datatype;1==o.string?(this.explode(),this.node.active=!1):("forceful"==n.gameData.pack?(o.string=Number(o.string)-n.gameData.forceful,o.string<=0&&(this.explode(),this.node.active=!1)):o.string=Number(o.string)-1,this.node.color=new cc.Color(n.randomColor(o.string,a)))}"wall"==e.node.name&&(this.node.dataxspeed=-this.node.dataxspeed)}}),cc._RF.pop()},{Global:"Global"}],bullet:[function(e,t,o){"use strict";cc._RF.push(t,"c3374eoZUdLNrPr1a2pkYwq","bullet");var a=e("Global");cc.Class({extends:cc.Component,properties:{},becomeLarger:function(){},bulletMove:function(){var e="forceful"==a.gameData.pack?48:22;this.node.width=this.node.height=e,this.node.y+=25,1==this.node.datakey?this.node.x+=-3:3==this.node.datakey?this.node.x+=3:4==this.node.datakey?this.node.x+=-6:5==this.node.datakey&&(this.node.x+=6),this.node.y>=this.node.parent.height/2&&a.gameData.bulletPool.put(this.node)},onCollisionEnter:function(e,t){a.gameData.bulletPool.put(this.node),a.game.getScore()},start:function(){},update:function(e){this.bulletMove()}}),cc._RF.pop()},{Global:"Global"}],game:[function(e,t,o){"use strict";cc._RF.push(t,"2b3bf+No+hJc6lvPTbQbvC6","game");var r=e("Global");cc.Class({extends:cc.Component,properties:{startBtn:{default:null,type:cc.Node},puaseBtn:{default:null,type:cc.Node},coverBox:{default:null,type:cc.Node},player:{default:null,type:cc.Node},scoreText:{default:null,type:cc.Label},blockBox:{default:null,type:cc.Node},blockListPrefab:{default:null,type:cc.Prefab},blockPrefab:{default:null,type:cc.Prefab},propPrefab:{default:null,type:cc.Prefab},forcefulPrefab:{default:null,type:cc.Prefab},blastPrefab:{default:null,type:cc.Prefab}},initGame:function(){var e=this;this.coverBox.active=!1,this.onDrag(),r.gameData.over=!1;for(var t=0;t<3;t++)this.createBlockList(t);this.schedule(function(){e.createProp()},16)},startGame:function(){cc.director.resume(),this.puaseBtn.active=!0,this.startBtn.active=!1,this.onDrag()},pauseGame:function(){r.gameData.over||(cc.director.pause(),this.startBtn.active=!0,this.puaseBtn.active=!1,this.offDrag())},gameEnd:function(){console.log("游戏结束~"),cc.director.pause(),this.offDrag(),r.gameData.over=!0,setTimeout(function(){cc.director.loadScene("rank",function(){console.log("重置游戏了~"),cc.director.resume()})},1e3)},getScore:function(){"forceful"==r.gameData.pack?r.gameData.score+=r.gameData.forceful:r.gameData.score+=1,this.scoreText.string=r.gameData.score},onDrag:function(){this.player.on("touchmove",this.dragMove,this)},offDrag:function(){this.player.off("touchmove",this.dragMove,this)},dragMove:function(e){if(!r.gameData.over){var t=e.getLocation(),o=this.node.convertToNodeSpaceAR(t),a=-this.node.width/2+this.player.width/2,n=-a,c=-this.node.height/2+this.player.height/2,i=-c;o.x<a&&(o.x=a),o.x>n&&(o.x=n),o.y<c&&(o.y=c),o.y>i&&(o.y=i),this.player.setPosition(o)}},createProp:function(){var e=1==parseInt(2*Math.random())+1?cc.instantiate(this.propPrefab):cc.instantiate(this.forcefulPrefab),t=parseInt((this.blockBox.width-e.width)*Math.random())+1+e.width,o=this.blockBox.height+e.height;e.setPosition(t,o),this.blockBox.addChild(e)},createBlockList:function(e){var t=cc.instantiate(this.blockListPrefab);t.width=this.node.width,t.height=210,t.parent=this.blockBox,t.setPosition(0,r.gameData.listSpacing*e+this.node.height)},blastObjGroup:function(){r.gameData.blastPool=new cc.NodePool;for(var e=0;e<20;++e){var t=cc.instantiate(this.blastPrefab);t.getComponent(cc.ParticleSystem).stopSystem(),r.gameData.blastPool.put(t)}},onLoad:function(){r.game=this,r.gameData.over=!0,r.gameData.score=0,r.gameData.level=1,r.gameData.pack="",cc.director.getCollisionManager().enabled=!0,this.blastObjGroup(),window.wx&&console.log("宽度：",this.node.width,wx.getSystemInfoSync().windowWidth)},start:function(){window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(e){return{title:r.shareInfo.title,imageUrl:r.shareInfo.url}}))}}),cc._RF.pop()},{Global:"Global"}],home:[function(e,t,o){"use strict";cc._RF.push(t,"e90d3hyrN9N7pOZvl1o1QZz","home");var a=e("Global");cc.Class({extends:cc.Component,properties:{},openGame:function(){cc.director.loadScene("game")},openRank:function(){cc.director.loadScene("rank")},onLoad:function(){cc.director.preloadScene("game",function(){return console.log("预加载游戏场景成功")})},start:function(){window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(e){return{title:a.shareInfo.title,imageUrl:a.shareInfo.url}}))}}),cc._RF.pop()},{Global:"Global"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"9d57fkR7DFDnKwtfXv6lp4C","player");var c=e("Global");cc.Class({extends:cc.Component,properties:{bulletPrefab:{default:null,type:cc.Prefab},count:0},onCollisionEnter:function(t,e){var o=this;function a(e){t.node.name==e&&t.node.parent.removeChild(t.node),o.scheduleOnce(function(){return c.gameData.pack=""},5)}console.log("飞机撞到的物体：",t.node.name),"prop"==t.node.name?(c.gameData.pack="three",a("prop")):"forceful"==t.node.name?a(c.gameData.pack="forceful"):c.game.gameEnd()},bulletObjGroup:function(){c.gameData.bulletPool=new cc.NodePool;for(var e=0;e<50;++e){var t=cc.instantiate(this.bulletPrefab);c.gameData.bulletPool.put(t)}},createBullet:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,o=null,a=this.node.getPosition().x,n=this.node.getPosition().y+this.node.height/4;(o=0<c.gameData.bulletPool.size()?c.gameData.bulletPool.get():cc.instantiate(this.bulletPrefab)).setPosition(a,n),o.parent=e,o.datakey=t},shooting:function(){if(!c.gameData.over){if(this.count+=1,this.count%parseInt(60/c.gameData.bulletNum)==0)if("three"===c.gameData.pack)for(var e=1;e<=3;e++)this.createBullet(c.game.node,e);else this.createBullet(c.game.node);600<=this.count&&(this.count=0)}},onLoad:function(){this.bulletObjGroup()},start:function(){},update:function(e){this.shooting()}}),cc._RF.pop()},{Global:"Global"}],prop:[function(e,t,o){"use strict";cc._RF.push(t,"51b3cu5nXNGfYqKeDzOAhP9","prop"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(e){this.node.y<.01?this.node.parent.removeChild(this.node):this.node.y-=5}}),cc._RF.pop()},{}],rank:[function(e,t,o){"use strict";cc._RF.push(t,"176f3H41mpDmbBb+8Ug+/U8","rank");var a=e("Global");cc.Class({extends:cc.Component,properties:{scoreText:{default:null,type:cc.Label}},backHome:function(){cc.director.loadScene("home")},backGame:function(){cc.director.loadScene("game")},closeRank:function(){},onLoad:function(){this.scoreText.string="历史最高得分："+a.gameData.score},start:function(){window.wx&&(wx.showShareMenu(),wx.onShareAppMessage(function(e){return{title:a.shareInfo.title,imageUrl:a.shareInfo.url}}))}}),cc._RF.pop()},{Global:"Global"}]},{},["Global","block","blockList","bullet","game","player","prop","home","rank"]);