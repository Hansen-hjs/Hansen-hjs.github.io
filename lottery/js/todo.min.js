(function(){function e(e){const t=i.documentElement;let n=7.5,c=e.getBoundingClientRect().width;t.style.fontSize=c/n+"px",window.addEventListener("resize",function(){c=e.getBoundingClientRect().width,t.style.fontSize=c/n+"px"})}function t(e,t){function n(){c.removeEventListener("animationend",n),t.removeChild(c),o.push(c)}let c=null;o.length>1?c=o.shift():(c=i.createElement("div"),c.className="ripple");let l=t.getBoundingClientRect(),r=t.getAttribute("color"),s=Math.max(l.width,l.height);s>200&&(s=200),c.style.height=c.style.width=s+"px",c.style.backgroundColor=r||"rgba(255, 255, 255, .45)",t.appendChild(c);let d=e.touches?e.touches[0].clientY:e.clientY,a=e.touches?e.touches[0].clientX:e.clientX,u=d-l.top-c.offsetHeight/2,h=a-l.left-c.offsetWidth/2;c.style.top=u+"px",c.style.left=h+"px",c.addEventListener("animationend",n)}function n(){const e=localStorage.getItem("todolist")||"";h.innerHTML=e,l()}function c(){const e=h.innerHTML.replace(/>\s+</g,"><").trim();localStorage.setItem("todolist",e)}function l(){const e=h.querySelectorAll('[name="select"]'),t=h.querySelectorAll("[checked]");e.length>0&&e.length==t.length?u.checked=!0:u.checked=!1}const i=document;e(i.querySelector(".page"));const o=[],r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i,s=r.test(navigator.userAgent),d=s?"touchstart":"mousedown";i.body.addEventListener(d,function(e){const n=e||window.event||arguments.callee.caller.arguments[0];let c=3,l=n.target;for(;c>0&&l&&l!=i.body;){if(c--,l.hasAttribute("ripple")){t(n,l);break}l=l.parentNode}});const a=i.querySelector(".footer"),u=a.querySelector('[name="select"]'),h=i.querySelector(".content .list");i.querySelector(".input").addEventListener("keypress",function(e){if(13!=e.keyCode)return;const t=e.target.value.trim();if(!t)return alert("输入的内容不能为空");const n=`\n        <div class="card flex fvertical item">\n            <p class="f1">${t}</p>\n            <input name="select" type="checkbox">\n        </div>`;h.insertAdjacentHTML("beforeend",n.replace(/\r|\n/g,"")),e.target.value=null,l(),c()}),i.querySelector(".icon-menu").addEventListener("click",function(){a.classList.toggle("hide"),this.classList.toggle("icon-close")}),h.addEventListener("click",function(e){const t=e.target;"select"==t.name&&(t.checked?t.setAttribute("checked",""):t.removeAttribute("checked"),l(),c())}),a.querySelector('[name="select"]').addEventListener("click",function(){const e=h.querySelectorAll('[name="select"]');if(0==e.length)return alert("没有可选的列表");for(let t=0;t<e.length;t++){const n=e[t];n.checked=this.checked,this.checked?n.setAttribute("checked",""):n.removeAttribute("checked")}c()}),a.querySelector(".icon-delete").addEventListener("click",function(){const e=h.querySelectorAll("[checked]");if(0==e.length)return alert("没有可删除的列表");for(let t=e.length-1;t>=0;t--)h.removeChild(e[t].parentNode);l(),c()}),n()})();