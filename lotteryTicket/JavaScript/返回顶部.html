<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>返回顶部</title>
</head>
<style>
	*{ padding: 0px; margin: 0px;}
	body{ font-family: 微软雅黑}
	ul,li{ list-style: none; }
	a{ text-decoration: none; }

	div{ width: 100%; height: 600px; }
	#goback{ display: block; visibility: hidden; width: 150px; height: 50px; text-align: center; background: #000; color: #fff; font-size: 16px; line-height: 50px; position: fixed; right: 10px; bottom: 10px; transition: 0.5s all; cursor: pointer;}
</style>
<body>
	<div style="background: lightgreen"></div>
	<div style="background: lightblue"></div>
	<div style="background: orange"></div>
	<div style="background: lightgreen"></div>
	<div style="background: lightblue"></div>
	<div style="background: orange"></div>
	<span id="goback">点击返回顶部</span>
</body>
</html>
<script>
function gobackTop(btn){
	let goback = document.getElementById(btn);
	let documentH = document.body.scrollHeight;  // 文档高度
	let scrollTop;
	let t1;
	let isExecuted = true;//鼠标重复点击
	// console.log(documentH);
	//窗口滚动时
	window.onscroll = function(){
		scrollTop = document.body.scrollTop || document.documentElement.scrollTop;//谷歌不可以就换IE
		if(scrollTop > (documentH/2.5)){
			goback.style.visibility = 'visible';
		}else{
			goback.style.visibility = 'hidden';
		}
	}
	// 滚滚动条缓动事件
	function move(){
		let speed;
		//speed=（目标-现在的位置）除以 数值
		speed = (0-scrollTop)/10;
		if (scrollTop <= 0) {
			clearInterval(t1);
		}else{
			document.body.scrollTop = scrollTop + speed;
			document.documentElement.scrollTop = scrollTop + speed;//滚动时也要用到IE的值
		}
	}
	// 滚轮事件
	document.body.onmousewheel = function(event){//清楚缓动
		clearInterval(t1);
	}
	// 点击事件
   goback.onclick = function(){
      if (isExecuted === true){
         //改变滚动条的值
         t1 = setInterval(move,1);
         isExecuted = false;
      }
      setTimeout(function(){
         isExecuted = true;
      },500);
   }
}
// gobackTop("goback");
function goTop(clickEleSelector){
	var clickEle = document.querySelector(clickEleSelector);
	var intervalId = null;
  var isExecuted = true;  // 重复点击
  var rootNode = document.body.scrollTop === 0 ? document.documentElement : document.body;
  window.addEventListener('scroll', function(){
		if(rootNode.scrollTop > (document.body.scrollHeight/2)){
			clickEle.style.visibility = 'visible';
		}else{
			clickEle.style.visibility = 'hidden';
		}
	});
	// 滚轮事件
	document.body.addEventListener('mousewheel',() => {
		clearInterval(intervalId);
	});
  // 点击事件
	clickEle.addEventListener('click', function () {
    if (isExecuted) {
      isExecuted = false;
      intervalId = setInterval(function () {
        rootNode.scrollTop = rootNode.scrollTop - rootNode.scrollTop * 0.1;
        if(rootNode.scrollTop <= 0){
          clearInterval(intervalId)
        }
      }, 10);
    }
    setTimeout(function () {
       isExecuted = true;
    },500);
	});
}
goTop('#goback');
//滚动条在Y轴上的滚动距离
// function getScrollTop(){
// 　　var scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;
// 　　if(document.body){
// 　　　　bodyScrollTop = document.body.scrollTop;
// 　　}
// 　　if(document.documentElement){
// 　　　　documentScrollTop = document.documentElement.scrollTop;
// 　　}
// 　　scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
// 　　return scrollTop;
// }
// //文档的总高度
// function getScrollHeight(){
// 　　var scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;
// 　　if(document.body){
// 　　　　bodyScrollHeight = document.body.scrollHeight;
// 　　}
// 　　if(document.documentElement){
// 　　　　documentScrollHeight = document.documentElement.scrollHeight;
// 　　}
// 　　scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
// 　　return scrollHeight;
// }
// //浏览器视口的高度
// function getWindowHeight(){
// 　　var windowHeight = 0;
// 　　if(document.compatMode == "CSS1Compat"){
// 　　　　windowHeight = document.documentElement.clientHeight;
// 　　}else{
// 　　　　windowHeight = document.body.clientHeight;
// 　　}
// 　　return windowHeight;
// }
// window.onscroll = function(){
// 　　if(getScrollTop() + getWindowHeight() == getScrollHeight()){
// 　　　　console.log("you are in the bottom!");
// 　　}
// };
</script>
