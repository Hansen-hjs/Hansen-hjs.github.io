<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>导航点击平移</title>
</head>
<style>
	*{ padding: 0px; margin: 0px;}
	body{ background: #525252; font-family: 微软雅黑}
	ul,li{ list-style: none; }
	a{ text-decoration: none; }

	.flex{ display: flex; display: -webkit-flex; display: -moz-flex; }
	.f1{ flex: 1 }
	header{ width: 500px; margin: 100px auto; }
	nav{ background: #fff; height: 48px; position: relative;}
	nav li{ text-align: center; position: relative; z-index: 2}
	nav a{ color: #000; line-height: 48px; display: block; width: 100%; height: 48px;}
	.hover{ color: #31c27c; }
	#slide{ display: block; background: #31c27c; width: 125px; height: 3px; position: absolute; bottom: 0; left: 0; z-index: 1; transition: 0.5s all; -webkit-transition:0.5s all;}
</style>
<body>
	<header>
		<nav class="flex" id="nav">
			<li class="f1"><a href="#" class="hover">导航一</a></li>
			<li class="f1"><a href="#">导航二</a></li>
			<li class="f1"><a href="#">导航三</a></li>
			<li class="f1"><a href="#">导航四</a></li>
			<span id="slide"></span>
		</nav>
	</header>
</body>
</html>
<script>
function navCss(menu,list_box,list_a,navA_hover,line) {
	var navLi = document.getElementById(menu).getElementsByTagName(list_box);
	var navA = document.getElementById(menu).getElementsByTagName(list_a);
	var slide = document.getElementById(line);
	var slideW = navLi[0].offsetWidth;
	slide.style.width = slideW+"px";
	for (var i=0; i < navLi.length; i++) {
		navLi[i].index = i;
		navLi[i].onclick = function(){
			for(var j = 0; j < navLi.length; j++){
				navA[j].classList.remove(navA_hover);	//清除a的颜色class
			}
			// console.log(i);
			var whatTab = this.index;
			var howFar = slideW*whatTab;
			slide.style.transform = 'translate('+howFar+'px)';
			navA[whatTab].className = navA_hover;
		}
	}
	window.onresize = function(){		// 窗口变动改变尺寸
		slideW = navLi[0].offsetWidth;
		slide.style.width = slideW+"px";
		console.log(slideW);
	}
};
// navCss("nav","li","a","hover","slide");

// 更简洁的写法  let
function navSlide(slideLi,slideA,line,navA_hover) {
	var navLi = document.querySelectorAll(slideLi);
	var navA = document.querySelectorAll(slideA);
	var slide = document.querySelector(line);
	var slideW = navLi[0].offsetWidth;
	var howFar;
	slide.style.width = slideW+"px";
	for (let i = 0; i < navLi.length; i++) {
		navLi[i].onclick = () => {
         howFar = slideW*i;
			slide.style.transform = 'translate('+howFar+'px)';
			for (let k = 0; k < navLi.length; k++) {
				navA[k].classList.remove(navA_hover)
			}
         navA[i].classList.add(navA_hover);	//清除a的颜色class
		}
	}
}
navSlide('#nav li','#nav a','#slide','hover');
</script>
